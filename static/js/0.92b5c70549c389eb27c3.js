webpackJsonp([0,1],{"/0Sh":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"StatisticMaintainChart",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,rowE:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,year:"",machineType:"",nameNumber:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"repair",staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"row-class-name":e.rowstatus,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"},"row-style":{height:"60px"}}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})})],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("5Vyn")},"data-v-7ca9ffbc",null);t.default=s.exports},"0PzS":function(e,t){},"1T77":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"StatisticMaintainChart",props:{columns:Array,customColumns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,rowE:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{year:"",machineType:"",nameNumber:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)},showIconA:function(e,t,a){switch(console.log(a.property),a.property){case"january":if($.each(t.january,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"february":if($.each(t.february,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"march":if($.each(t.march,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"april":if($.each(t.april,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"may":if($.each(t.may,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"june":if($.each(t.june,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"july":if($.each(t.july,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"august":if($.each(t.august,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"september":if($.each(t.september,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"october":if($.each(t.october,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"november":if($.each(t.november,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"december":var i;if($.each(t.december,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0}},showIconB:function(e,t,a){switch(a.property){case"january":if($.each(t.january,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"february":if($.each(t.february,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"march":if($.each(t.march,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"april":if($.each(t.april,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"may":if($.each(t.may,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"june":if($.each(t.june,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"july":if($.each(t.july,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"august":if($.each(t.august,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"september":if($.each(t.september,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"october":if($.each(t.october,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"november":if($.each(t.november,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0;break;case"december":var i;if($.each(t.december,function(e,t){-1==t.state&&(i=t.state)}),-1==i)return!0}},showIconC:function(e,t,a){switch(a.property){case"january":if($.each(t.january,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"february":if($.each(t.february,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"march":if($.each(t.march,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"april":if($.each(t.april,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"may":if($.each(t.may,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"june":if($.each(t.june,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"july":if($.each(t.july,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"august":if($.each(t.august,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"september":if($.each(t.september,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"october":if($.each(t.october,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"november":if($.each(t.november,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"december":var i;if($.each(t.december,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0}},showIconD:function(e,t,a){switch(a.property){case"january":if($.each(t.january,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"february":if($.each(t.february,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"march":if($.each(t.march,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"april":if($.each(t.april,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"may":if($.each(t.may,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"june":if($.each(t.june,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"july":if($.each(t.july,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"august":if($.each(t.august,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"september":if($.each(t.september,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"october":if($.each(t.october,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"november":if($.each(t.november,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"december":var i;if($.each(t.december,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0}}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"maintenance",staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"},"row-style":{height:"60px"}}},[e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e._l(e.customColumns,function(t){return a("el-table-column",{key:t.prop,attrs:{"header-align":"center",align:"center",prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth,fixed:t.fixed,type:t.type},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{directives:[{name:"show",rawName:"v-show",value:e.showIconA(t.$index,t.row,t.column),expression:"showIconA(scope.$index,scope.row,scope.column)"}],staticClass:"iconfont icon-ali-success"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.showIconB(t.$index,t.row,t.column),expression:"showIconB(scope.$index,scope.row,scope.column)"}],staticClass:"iconfont icon-ali-error"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.showIconC(t.$index,t.row,t.column),expression:"showIconC(scope.$index,scope.row,scope.column)"}],staticClass:"iconfont icon-ali-stop"})]}}],null,!0)})})],2)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("ZOWQ")},"data-v-742f72b8",null);t.default=s.exports},"2ImO":function(e,t){},"4YDF":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("NYxO"),d=a("oor5"),u=a("AUIh"),m={components:{ProcessParameterTable:d.default},data:function(){var e=this;return{size:"small",tableHeight:null,form:{date1:"",date2:""},filters:{name:""},columns:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageParams:{currPage:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,dialogVisibleB:!1,editLoading:!1,dataFormRules:{},refFormRules:{},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,materialName:"",materialCode:"",procedure:"",type:"",programNumber:"",material:""},refForm:{},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},selectMachineNumber:"",selectProcessName:"",machineNumber:[],processName:[],materialName:"",materialCode:"",productionProcessesName:"",machine:"",machineCode:"",process_sheet:{mode:"全自动",oil:56.5,cool:20,environment:35.8,temperature:{img:a("obup"),name:"设定值",text:["一段","二段","三段","四段","五段","六段","七段","八段"],value:[30.9,33.6,33.9,32.5,28.6,25.6,28.8,32.5]},group:[{img:a("Txl5"),name:["压力","速度","位置"],text:["一段","二段","三段","低压","高压"],list:[{value:[30.9,33.6,33.9,32.5,28.6]},{value:[30.9,33.6,33.9,32.5,28.6]},{value:[33.6,33.9,32.5,28.6]}]},{img:a("UT21"),name:[],text:["五段","四段","三段","二段","一段"],list:[{value:[30.9,33.6,33.9,32.5,28.6]},{value:[30.9,33.6,33.9,32.5,28.6]},{value:[30.9,33.6,33.9,32.5,28.6]}]},{img:a("U+2z"),name:["压力","速度","位置"],text:["六段","五段","四段","三段","二段","一段"],list:[{value:[30.9,33.6,33.9,32.5,28.6,28.6]},{value:[30.9,33.6,33.9,32.5,28.6,28.6]},{value:[33.6,33.9,32.5,28.6,28.6]}]},{img:a("8y5t"),name:["压力","速度","位置"],text:["进一","进二"],list:[{value:[30.9,33.6]},{value:[30.9,33.6]},{value:[30.9,33.6]}]},{img:a("12Qd"),name:["压力","速度","时间"],text:["五段","四段","三段","二段","一段"],list:[{value:[33.6,33.9,32.5,28.6,28.6]},{value:[33.6,33.9,32.5,28.6,28.6]},{value:[33.6,33.9,32.5,28.6,28.6]}]},{img:a("QFQK"),name:["压力","速度","位置"],text:["退一","退二"],list:[{value:[30.9,33.6]},{value:[30.9,33.6]},{value:[30.9,33.6]}]},{img:a("bj4H"),name:["压力","速度","位置"],text:["一段","二段","三段","四段","五段"],list:[{value:[33.6,33.9,32.5,28.6,28.6]},{value:[33.6,33.9,32.5,28.6,28.6]},{value:[33.6,33.9,32.5,28.6,28.6]}]},{img:a("01Ob"),name:["压力","速度","位置"],text:[],list:[{value:[30.9]},{value:[30.9]},{value:[30.9]}]}]},machineType:[],materialAll:[],material:{},materialForm:{name:"",code:"",type:""},route:{procedure:["粗车","精车"]},show:!1}},computed:s()({},Object(c.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.machineNumber=t.selectMachineNumber,e.pageRequest.productionProcessesName=t.selectProcessName,e.pageRequest.nameCode=t.dataForm.material,t.pageRequest=e.pageRequest),t.$api.process.findPageParameter(t.pageRequest).then(function(e){console.log(e),e.data.data.parameter.data.forEach(function(e,t){}),t.pageResult=e.data.data.parameter,console.log(t.pageResult)}).then(null!=e?e.callback:""),t.$api.process.findPageParameter(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){}),t.pageResult=e.data,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;""==e.dataForm.material&&(e.materialForm.code=""),e.pageParams={currPage:1,pageSize:10,machineNumber:e.selectMachineNumber,productionProcessesName:e.selectProcessName,nameCode:e.dataForm.material},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,e.$api.process.findPageParameter(e.pageParams).then(function(t){console.log(t),t.data.data.forEach(function(e,t){}),e.pageResult=t.data,console.log(e.pageResult)}).then()},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){this.$api.configuration.batchDelete(e.params).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={}},handleCheck:function(e){var t=this;t.dialogVisibleB=!0,console.log(e),t.material=n()({},e.row),console.log(t.material),t.materialName=e.row.materialName,t.materialCode=e.row.materialCode,t.productionProcessesName=e.row.productionProcessesName,t.machine=e.row.machine,t.machineCode=e.row.machineNumber,$.ajax({type:"GET",url:"/xaj/process/findProcessParametersDetail",data:{id:e.row.id},success:function(e){console.log(e),$.each(e,function(e,a){if("运行状态"==a.fieldName){switch(a.data){case 0:a.data="手动";break;case 3:a.data="半自动";break;case 5:a.data="电眼全自动";break;case 9:a.data="时间全自动";break;case 16:a.data="调模使用"}t.process_sheet.mode=a.data}"油温"==a.fieldName&&(t.process_sheet.oil=a.data),"冷却时间"==a.fieldName&&(t.process_sheet.cool=a.data),"环境温度"==a.fieldName&&(t.process_sheet.environment=a.data),"关模一段压力"==a.fieldName&&(t.process_sheet.group[0].list[0].value[0]=a.data),"关模二段压力"==a.fieldName&&(t.process_sheet.group[0].list[0].value[1]=a.data),"关模三段压力"==a.fieldName&&(t.process_sheet.group[0].list[0].value[2]=a.data),"关模低段压力"==a.fieldName&&(t.process_sheet.group[0].list[0].value[3]=a.data),"关模高段压力"==a.fieldName&&(t.process_sheet.group[0].list[0].value[4]=a.data),"关模一段速度"==a.fieldName&&(t.process_sheet.group[0].list[1].value[0]=a.data),"关模二段速度"==a.fieldName&&(t.process_sheet.group[0].list[1].value[1]=a.data),"关模三段速度"==a.fieldName&&(t.process_sheet.group[0].list[1].value[2]=a.data),"关模低段速度"==a.fieldName&&(t.process_sheet.group[0].list[1].value[3]=a.data),"关模高段速度"==a.fieldName&&(t.process_sheet.group[0].list[1].value[4]=a.data),"关模一段位置"==a.fieldName&&(t.process_sheet.group[0].list[2].value[0]=a.data),"关模二段位置"==a.fieldName&&(t.process_sheet.group[0].list[2].value[1]=a.data),"关模三段位置"==a.fieldName&&(t.process_sheet.group[0].list[2].value[2]=a.data),"关模低段位置"==a.fieldName&&(t.process_sheet.group[0].list[2].value[3]=a.data),"开模五段压力"==a.fieldName&&(t.process_sheet.group[1].list[0].value[0]=a.data),"开模四段压力"==a.fieldName&&(t.process_sheet.group[1].list[0].value[1]=a.data),"开模三段压力"==a.fieldName&&(t.process_sheet.group[1].list[0].value[2]=a.data),"开模二段压力"==a.fieldName&&(t.process_sheet.group[1].list[0].value[3]=a.data),"开模一段压力"==a.fieldName&&(t.process_sheet.group[1].list[0].value[4]=a.data),"开模五段速度"==a.fieldName&&(t.process_sheet.group[1].list[1].value[0]=a.data),"开模四段速度"==a.fieldName&&(t.process_sheet.group[1].list[1].value[1]=a.data),"开模三段速度"==a.fieldName&&(t.process_sheet.group[1].list[1].value[2]=a.data),"开模二段速度"==a.fieldName&&(t.process_sheet.group[1].list[1].value[3]=a.data),"开模一段速度"==a.fieldName&&(t.process_sheet.group[1].list[1].value[4]=a.data),"开模五段位置"==a.fieldName&&(t.process_sheet.group[1].list[2].value[0]=a.data),"开模四段位置"==a.fieldName&&(t.process_sheet.group[1].list[2].value[1]=a.data),"开模三段位置"==a.fieldName&&(t.process_sheet.group[1].list[2].value[2]=a.data),"开模二段位置"==a.fieldName&&(t.process_sheet.group[1].list[2].value[3]=a.data),"开模一段位置"==a.fieldName&&(t.process_sheet.group[1].list[2].value[4]=a.data),"射胶六段压力"==a.fieldName&&(t.process_sheet.group[2].list[0].value[0]=a.data),"射胶五段压力"==a.fieldName&&(t.process_sheet.group[2].list[0].value[1]=a.data),"射胶四段压力"==a.fieldName&&(t.process_sheet.group[2].list[0].value[2]=a.data),"射胶三段压力"==a.fieldName&&(t.process_sheet.group[2].list[0].value[3]=a.data),"射胶二段压力"==a.fieldName&&(t.process_sheet.group[2].list[0].value[4]=a.data),"射胶一段压力"==a.fieldName&&(t.process_sheet.group[2].list[0].value[5]=a.data),"射胶六段速度"==a.fieldName&&(t.process_sheet.group[2].list[1].value[0]=a.data),"射胶五段速度"==a.fieldName&&(t.process_sheet.group[2].list[1].value[1]=a.data),"射胶四段速度"==a.fieldName&&(t.process_sheet.group[2].list[1].value[2]=a.data),"射胶三段速度"==a.fieldName&&(t.process_sheet.group[2].list[1].value[3]=a.data),"射胶二段速度"==a.fieldName&&(t.process_sheet.group[2].list[1].value[4]=a.data),"射胶一段速度"==a.fieldName&&(t.process_sheet.group[2].list[1].value[5]=a.data),"射胶六段位置"==a.fieldName&&(t.process_sheet.group[2].list[2].value[0]=a.data),"射胶五段位置"==a.fieldName&&(t.process_sheet.group[2].list[2].value[1]=a.data),"射胶四段位置"==a.fieldName&&(t.process_sheet.group[2].list[2].value[2]=a.data),"射胶三段位置"==a.fieldName&&(t.process_sheet.group[2].list[2].value[3]=a.data),"射胶二段位置"==a.fieldName&&(t.process_sheet.group[2].list[2].value[4]=a.data),"托模进一压力"==a.fieldName&&(t.process_sheet.group[3].list[0].value[0]=a.data),"托模进二压力"==a.fieldName&&(t.process_sheet.group[3].list[0].value[1]=a.data),"托模进一速度"==a.fieldName&&(t.process_sheet.group[3].list[1].value[0]=a.data),"托模进二速度"==a.fieldName&&(t.process_sheet.group[3].list[1].value[1]=a.data),"托模进一位置"==a.fieldName&&(t.process_sheet.group[3].list[2].value[0]=a.data),"托模进二位置"==a.fieldName&&(t.process_sheet.group[3].list[2].value[1]=a.data),"保压五段压力"==a.fieldName&&(t.process_sheet.group[4].list[0].value[0]=a.data),"保压四段压力"==a.fieldName&&(t.process_sheet.group[4].list[0].value[1]=a.data),"保压三段压力"==a.fieldName&&(t.process_sheet.group[4].list[0].value[2]=a.data),"保压二段压力"==a.fieldName&&(t.process_sheet.group[4].list[0].value[3]=a.data),"保压一段压力"==a.fieldName&&(t.process_sheet.group[4].list[0].value[4]=a.data),"保压五段速度"==a.fieldName&&(t.process_sheet.group[4].list[1].value[0]=a.data),"保压四段速度"==a.fieldName&&(t.process_sheet.group[4].list[1].value[1]=a.data),"保压三段速度"==a.fieldName&&(t.process_sheet.group[4].list[1].value[2]=a.data),"保压二段速度"==a.fieldName&&(t.process_sheet.group[4].list[1].value[3]=a.data),"保压一段速度"==a.fieldName&&(t.process_sheet.group[4].list[1].value[4]=a.data),"保压五段时间"==a.fieldName&&(t.process_sheet.group[4].list[2].value[0]=a.data),"保压四段时间"==a.fieldName&&(t.process_sheet.group[4].list[2].value[1]=a.data),"保压三段时间"==a.fieldName&&(t.process_sheet.group[4].list[2].value[2]=a.data),"保压二段时间"==a.fieldName&&(t.process_sheet.group[4].list[2].value[3]=a.data),"保压一段时间"==a.fieldName&&(t.process_sheet.group[4].list[2].value[4]=a.data),"托模退一压力"==a.fieldName&&(t.process_sheet.group[5].list[0].value[0]=a.data),"托模退二压力"==a.fieldName&&(t.process_sheet.group[5].list[0].value[1]=a.data),"托模退一速度"==a.fieldName&&(t.process_sheet.group[5].list[1].value[0]=a.data),"托模退二速度"==a.fieldName&&(t.process_sheet.group[5].list[1].value[1]=a.data),"托模退一位置"==a.fieldName&&(t.process_sheet.group[5].list[2].value[0]=a.data),"托模退二位置"==a.fieldName&&(t.process_sheet.group[5].list[2].value[1]=a.data),"储料一段压力"==a.fieldName&&(t.process_sheet.group[6].list[0].value[0]=a.data),"储料二段压力"==a.fieldName&&(t.process_sheet.group[6].list[0].value[1]=a.data),"储料三段压力"==a.fieldName&&(t.process_sheet.group[6].list[0].value[2]=a.data),"储料四段压力"==a.fieldName&&(t.process_sheet.group[6].list[0].value[3]=a.data),"储料五段压力"==a.fieldName&&(t.process_sheet.group[6].list[0].value[4]=a.data),"储料一段速度"==a.fieldName&&(t.process_sheet.group[6].list[1].value[0]=a.data),"储料二段速度"==a.fieldName&&(t.process_sheet.group[6].list[1].value[1]=a.data),"储料三段速度"==a.fieldName&&(t.process_sheet.group[6].list[1].value[2]=a.data),"储料四段速度"==a.fieldName&&(t.process_sheet.group[6].list[1].value[3]=a.data),"储料五段速度"==a.fieldName&&(t.process_sheet.group[6].list[1].value[4]=a.data),"储料一段位置"==a.fieldName&&(t.process_sheet.group[6].list[2].value[0]=a.data),"储料二段位置"==a.fieldName&&(t.process_sheet.group[6].list[2].value[1]=a.data),"储料三段位置"==a.fieldName&&(t.process_sheet.group[6].list[2].value[2]=a.data),"储料四段位置"==a.fieldName&&(t.process_sheet.group[6].list[2].value[3]=a.data),"储料五段位置"==a.fieldName&&(t.process_sheet.group[6].list[2].value[4]=a.data),"射退压力"==a.fieldName&&(t.process_sheet.group[7].list[0].value[0]=a.data),"射退速度"==a.fieldName&&(t.process_sheet.group[7].list[1].value[0]=a.data),"射退位置"==a.fieldName&&(t.process_sheet.group[7].list[2].value[0]=a.data)})}})},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=n()({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=n()({},e.dataForm);e.$api.configuration.save(t).then(function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs.dataForm.resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)})})})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(u.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"materialName",label:"物料名称",minWidth:160},{prop:"materialCode",label:"物料编码",minWidth:100},{prop:"productionProcessesName",label:"加工工序",minWidth:100},{prop:"machine",label:"设备名称",minWidth:100},{prop:"machineNumber",label:"设备编号",minWidth:80},{prop:"processParameters",label:"工艺参数",minWidth:350},{prop:"updateTime",label:"采集时间",minWidth:160}],this.filterColumns=JSON.parse(o()(this.columns))},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},onChange:function(e,t){},querySearch:function(e,t){var a=this.materialAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},loadAll:function(){},handleSelect:function(e){console.log(e),this.materialForm={name:e.name,code:e.code,type:e.type},console.log(this.materialForm)},procedureBind:function(e){0==e.length?this.show=!0:this.show=!1}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,i.initColumns(),$.ajax({type:"GET",url:"/xaj/configuration/searchAllMachineNumber",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)}),$.each(t,function(e,t){i.machineNumber.push({value:t})})}}),$.ajax({type:"GET",url:"/xaj/configuration/findAllProductionProcesses",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)}),$.each(t,function(e,t){i.processName.push({value:t.productionProcessesName})})}}),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/mission/searchMaterial",data:{materialName:""},success:function(e){$.each(e,function(e,t){i.materialAll.push({value:t.material,name:t.materialName,code:t.materialCode,type:t.specifications})})}})},500)}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"设备编号"},model:{value:e.selectMachineNumber,callback:function(t){e.selectMachineNumber=t},expression:"selectMachineNumber"}},e._l(e.machineNumber,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"工序名称"},model:{value:e.selectProcessName,callback:function(t){e.selectProcessName=t},expression:"selectProcessName"}},e._l(e.processName,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入物料名称或物料编码","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.material,callback:function(t){e.$set(e.dataForm,"material",t)},expression:"dataForm.material"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("Process-parameter-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns},on:{findPage:e.findPage,handleCheck:e.handleCheck,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"processDialog",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.operation?a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"120px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"物料名称",prop:"materialName"}},[a("el-input",{attrs:{id:"materialName"},model:{value:e.dataForm.materialName,callback:function(t){e.$set(e.dataForm,"materialName",t)},expression:"dataForm.materialName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料编码",prop:"materialCode"}},[a("el-input",{attrs:{id:"materialCode"},model:{value:e.dataForm.materialCode,callback:function(t){e.$set(e.dataForm,"materialCode",t)},expression:"dataForm.materialCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加工工序",prop:"procedure"}},[a("el-input",{attrs:{id:"procedure"},model:{value:e.dataForm.procedure,callback:function(t){e.$set(e.dataForm,"procedure",t)},expression:"dataForm.procedure"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthA",attrs:{label:"设备类型",prop:"type"}},[a("el-select",{attrs:{size:"medium",placeholder:"设备类型"},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.machineType,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.val}})}),1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"inputLength",attrs:{label:"程序号",prop:"programNumber"}},[a("el-input",{attrs:{id:"programNumber"},model:{value:e.dataForm.programNumber,callback:function(t){e.$set(e.dataForm,"programNumber",t)},expression:"dataForm.programNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"程序文件"}},[a("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/",drag:""}},[a("i",{staticClass:"iconfont icon-ali-folder"}),e._v(" "),a("div",{staticClass:"el-upload__text text-click"},[e._v("点击或将程序文件拖拽到这里上传")]),e._v(" "),a("div",{staticClass:"el-upload__text text-fileType"},[e._v("支持扩展名：.rar .zip .doc .docx .pdf .jpg...")])])],1)],1):e._e(),e._v(" "),e.operation?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"查看工艺",width:"50%",visible:e.dialogVisibleB,"custom-class":"processDialog",center:""},on:{"update:visible":function(t){e.dialogVisibleB=t}}},[a("el-form",[a("div",{staticClass:"header clearfix"},[a("p",[e._v("物料名称："),a("span",[e._v(e._s(e.materialName))])]),e._v(" "),a("p",[e._v("规格型号："),a("span",[e._v(e._s(e.materialCode))])]),e._v(" "),a("p",[e._v("生产工序："),a("span",[e._v(e._s(e.productionProcessesName))])]),e._v(" "),a("p",[e._v("设备名称："),a("span",[e._v(e._s(e.machine))])]),e._v(" "),a("p",[e._v("设备编号："),a("span",[e._v(e._s(e.machineCode))])])]),e._v(" "),a("div",{staticClass:"tech-body clearfix"},[a("div",{staticClass:"table-mode"},[a("ul",{staticClass:"head clearfix"},[a("li",[e._v("运行模式")]),e._v(" "),a("li",[e._v("油温")]),e._v(" "),a("li",[e._v("冷却时间")]),e._v(" "),a("li",[e._v("环境温度")])]),e._v(" "),a("ul",{staticClass:"body clearfix"},[a("li",[e._v(e._s(e.process_sheet.mode))]),e._v(" "),a("li",[e._v(e._s(e.process_sheet.oil))]),e._v(" "),a("li",[e._v(e._s(e.process_sheet.cool))]),e._v(" "),a("li",[e._v(e._s(e.process_sheet.environment))])])]),e._v(" "),a("div",{staticClass:"table-group clearfix"},e._l(e.process_sheet.group,function(t){return a("div",{staticClass:"table-example"},[a("div",{staticClass:"table-example-head"},[a("div",[a("img",{attrs:{src:t.img}})]),e._v(" "),e._l(t.name,function(t){return a("div",[e._v(e._s(t))])})],2),e._v(" "),a("div",{staticClass:"table-example-body"},[a("ul",{staticClass:"head clearfix"},e._l(t.text,function(t){return a("li",[e._v(e._s(t))])}),0),e._v(" "),e._l(t.list,function(t){return a("ul",{staticClass:"body clearfix"},e._l(t.value,function(t){return a("li",[e._v(e._s(t))])}),0)})],2)])}),0)])])],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,p,!1,function(e){a("kWAW")},null,null);t.default=h.exports},"5Vyn":function(e,t){},"5d5z":function(e,t){},"72lX":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"MaintenanceRecordTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,startTime:"",endTime:"",status:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){200==e.code?(t.$message({message:"删除成功",type:"success"}),t.findPage()):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.loading=!1}})}).catch(function(){})},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},handleFill:function(e,t){var a=[e,t];this.$emit("handle-fill",a)},handleCheck:function(e,t){var a=[e,t];this.$emit("handle-check",a)},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"row-class-name":e.rowstatus,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showButtonA(t.$index,e.rowA)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleFill(t.$index,t.row)}}},[e._v("填报")]):e._e(),e._v(" "),e.showButtonB(t.$index,e.rowB)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleCheck(t.$index,t.row)}}},[e._v("查看")]):e._e()]}}],null,!1,2155130489)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("d+nR")},"data-v-21cb6c80",null);t.default=s.exports},"7P3m":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"UserTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,text:Array,rowA:Array,rowB:Array,rowC:Array,rowD:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,status:"",nameMobile:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){t.$message({message:"删除成功",type:"success"}),t.findPage(),t.loading=!1}})}).catch(function(){})},handleLock:function(e,t){var a=this;console.log(t);var i="禁用"==t.status?"启用":"禁用",o="禁用"==t.status?0:1;this.$confirm("您确定"+i+"该内容吗？","确认").then(function(){var e={id:t.id,status:o};a.loading=!0;a.$emit("handle-lock",{params:e,callback:function(e){a.findPage(),a.loading=!1}})}).catch(function(){})},handleReset:function(e,t){var a=this;console.log(t),this.$confirm("您确定重置密码吗？","确认").then(function(){var e={id:t.id,mobile:t.mobile};a.loading=!0;a.$emit("handle-reset",{params:e,callback:function(e){a.findPage(),a.loading=!1}})}).catch(function(){})},showText:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonC:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonD:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"row-class-name":e.rowstatus,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"350","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showText(t.$index,e.text)?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonA(t.$index,e.rowA),expression:"showButtonA(scope.$index,rowA)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleLock(t.$index,t.row)}}},[e._v("禁用")]):a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonA(t.$index,e.rowA),expression:"showButtonA(scope.$index,rowA)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleLock(t.$index,t.row)}}},[e._v("启用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonB(t.$index,e.rowB),expression:"showButtonB(scope.$index,rowB)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonC(t.$index,e.rowC),expression:"showButtonC(scope.$index,rowC)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonD(t.$index,e.rowD),expression:"showButtonD(scope.$index,rowD)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleReset(t.$index,t.row)}}},[e._v("重置密码")])]}}],null,!1,1824192365)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("RP5A")},"data-v-7241f0b2",null);t.default=s.exports},"7bV1":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("Dd8w"),n=a.n(r),l=a("NYxO"),s=a("IB2h"),c=a("1T77"),d=a("i0Tw"),u=a("OVXC"),m=a("/0Sh"),p=(a("AUIh"),{components:{StatisticMaintenanceTable:s.default,StatisticMaintainChart:c.default,StatisticMaintainTable:d.default,StatisticRepairChart:u.default,StatisticRepairTable:m.default},data:function(){var e=this;return{inputs:[{}],size:"small",tableHeight:null,form:{date1:"",date2:""},year:"",machine:"",maintenance:"",filters:{name:""},columns:[],columnsA:[],columnsB:[],columnsCopy:[],custom_columns:[],rowA:[],rowB:[],rowC:[],rowD:[],rowE:[],filterColumns:[],filterColumnsA:[],filterColumnsB:[],filterColumnsCopy:[],filterCustomColumns:[],pageRequest:{},pageParams:{},pageParamsChart:{},chartResultA:{},pageResultA:{},operation:!0,dialogVisible:!1,action:!0,dialogVisibleB:!1,editLoading:!1,editLoadingB:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],decNum:[{required:!0,message:"请输入数量",trigger:"blur"}]},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,decNum:"",device:""},refForm:{dev_value:"",per_value:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",working:{},planTime:{date1:"",date2:""},machineType:[],isTableAll:!0,isTableA:!1,isTableB:!1,isMaintainChart:!0,isRepairChart:!0,radio1:"图形",radio2:"图形",deviceForm:{nameNumber:""}}},computed:n()({},Object(l.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPageA:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.year=t.year,e.pageRequest.machineType=t.machine,e.pageRequest.nameNumber=t.dataForm.device,t.pageRequest=e.pageRequest),t.$api.statistic.findPageAMaintenance(t.pageRequest).then(function(e){console.log(e),e.data.data.maintenance_a_list.data.forEach(function(e,t){switch(e.status){case 0:e.status="未保养";break;case 1:e.status="已保养"}switch(e.period){case"byMonth":e.period="按月";break;case"byYear":e.period="按年";break;case"byDay":period="按日"}}),t.pageResultA=e.data.data.maintenance_a_list,console.log(t.pageResultA)}).then(null!=e?e.callback:""),t.$api.statistic.findPageAMaintenance(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="未保养";break;case 1:e.status="已保养"}switch(e.period){case"byMonth":e.period="按月";break;case"byYear":e.period="按年";break;case"byDay":period="按日"}}),t.pageResultA=e.data,console.log(t.pageResultA)}).then(null!=e?e.callback:"")},findChartA:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.year=t.year,e.pageRequest.machineType=t.machine,e.pageRequest.nameNumber=t.dataForm.device,t.pageRequest=e.pageRequest),t.$api.statistic.findChartAMaintenance(t.pageRequest).then(function(e){console.log(e);var a=e.data.data.maintenance_a_chart.data;console.log(a),a.forEach(function(e,t){switch(e.period){case"byMonth":e.period="按月";break;case"byYear":e.period="按年";break;case"byDay":period="按日"}e.january=[{state:e.january}],e.february=[{state:e.february}],e.march=[{state:e.march}],e.april=[{state:e.april}],e.may=[{state:e.may}],e.june=[{state:e.june}],e.july=[{state:e.july}],e.august=[{state:e.august}],e.september=[{state:e.september}],e.october=[{state:e.october}],e.november=[{state:e.november}],e.december=[{state:e.december}]}),console.log(a),t.chartResultA=e.data.data.maintenance_a_chart,console.log(t.chartResultA)}).then(null!=e?e.callback:""),t.$api.statistic.findChartAMaintenance(t.pageRequest).then(function(e){console.log(e);var a=e.data;console.log(a),a.forEach(function(e,t){switch(e.period){case"byMonth":e.period="按月";break;case"byYear":e.period="按年";break;case"byDay":period="按日"}e.january=[{state:e.january}],e.february=[{state:e.february}],e.march=[{state:e.march}],e.april=[{state:e.april}],e.may=[{state:e.may}],e.june=[{state:e.june}],e.july=[{state:e.july}],e.august=[{state:e.august}],e.september=[{state:e.september}],e.october=[{state:e.october}],e.november=[{state:e.november}],e.december=[{state:e.december}]}),console.log(a),t.chartResultA=e,console.log(t.chartResultA)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;null==e.year&&(e.year=[]),""==e.dataForm.device&&(e.deviceForm.nameNumber=""),e.isMaintainChart?(e.pageParams={year:e.year,machineType:e.machine,nameCode:e.dataForm.device},e.$api.statistic.findChartAMaintenance(e.pageParams).then(function(t){console.log(t);var a=t.data;console.log(a),a.forEach(function(e,t){switch(e.period){case"byMonth":e.period="按月";break;case"byYear":e.period="按年";break;case"byDay":period="按日"}e.january=[{state:e.january}],e.february=[{state:e.february}],e.march=[{state:e.march}],e.april=[{state:e.april}],e.may=[{state:e.may}],e.june=[{state:e.june}],e.july=[{state:e.july}],e.august=[{state:e.august}],e.september=[{state:e.september}],e.october=[{state:e.october}],e.november=[{state:e.november}],e.december=[{state:e.december}]}),console.log(a),e.chartResultA=t,console.log(e.chartResultA)}).then()):(e.pageParams={currPage:1,pageSize:10,year:e.year,machineType:e.machine,nameCode:e.dataForm.device},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,e.$api.statistic.findPageAMaintenance(e.pageParams).then(function(t){console.log(t),t.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="未保养";break;case 1:e.status="已保养"}switch(e.period){case"byMonth":e.period="按月";break;case"byYear":e.period="按年";break;case"byDay":period="按日"}}),e.pageResultA=t.data,console.log(e.pageResultA)}).then())},submitForm:function(){var e=this;e.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0,e.operation?$.ajax({type:"GET",url:"/xaj/production/splitOrder",data:e.paramsSplit,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.inputs=[{}]}}):$.ajax({type:"POST",url:"/xaj/production/sendOrder",data:e.paramsSend,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.refForm.resetFields()}})})})},initColumns:function(){this.columns=[{prop:"machine",label:"设备名称",minWidth:90},{prop:"machineNumber",label:"设备编号",minWidth:90},{prop:"period",label:"保养周期",minWidth:90}],this.filterColumns=JSON.parse(o()(this.columns))},initColumnsA:function(){this.columnsA=[{prop:"month",label:"年月份",minWidth:90},{prop:"machineNumber",label:"设备编号",minWidth:100},{prop:"machine",label:"设备名称",minWidth:100},{prop:"machineType",label:"设备类型",minWidth:100},{prop:"period",label:"保养周期",minWidth:100},{prop:"maintenanceDate",label:"保养时间",minWidth:110},{prop:"ddPerson",label:"担当人",minWidth:90},{prop:"zrPerson",label:"责任人",minWidth:90},{prop:"remark",label:"备注",minWidth:90},{prop:"updateTime",label:"填报时间",minWidth:110},{prop:"status",label:"状态",minWidth:100}],this.filterColumnsA=JSON.parse(o()(this.columnsA))},initCustomColumns:function(){this.custom_columns=[{prop:"january",label:"1月",minWidth:110},{prop:"february",label:"2月",minWidth:110},{prop:"march",label:"3月",minWidth:110},{prop:"april",label:"4月",minWidth:110},{prop:"may",label:"5月",minWidth:110},{prop:"june",label:"6月",minWidth:110},{prop:"july",label:"7月",minWidth:110},{prop:"august",label:"8月",minWidth:110},{prop:"september",label:"9月",minWidth:110},{prop:"october",label:"10月",minWidth:110},{prop:"november",label:"11月",minWidth:110},{prop:"december",label:"12月",minWidth:110}],this.filterCustomColumns=JSON.parse(o()(this.custom_columns))},querySearch:function(e,t){var a=this.deviceAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},handleSelect:function(e){console.log(e),this.deviceForm={nameNumber:e.value},console.log(this.deviceForm)},tableRowClassNameA:function(e){var t=e.row,a=e.rowIndex,i=$(".maintain .el-table__body-wrapper tbody tr:eq(0) td").length-1;"未保养"==t.status?$(".maintain .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+i+")").css({color:"#FF9800"}):"已保养"==t.status&&$(".maintain .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+i+")").css({color:"#3F51B5"})},handleMaintenance:function(e){console.log(e),1==e?(this.isTableAll=!1,this.isTableA=!0,this.isTableB=!1):2==e&&(this.isTableAll=!1,this.isTableA=!1,this.isTableB=!0)},chooseRadioA:function(e){this.isMaintainChart="图形"==e},chooseRadioB:function(e){this.isRepairChart="图形"==e}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-270,i.initColumns(),i.initColumnsA(),i.initCustomColumns(),console.log(i.filterColumns,i.filterCustomColumns),console.log(localStorage.getItem("groupId"),localStorage.getItem("icCardNum")),$.ajax({type:"GET",url:"/xaj/maintenance/findAllMachineType",success:function(e){$.each(e,function(e,t){i.machineType.push({value:t})})}}),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/configuration/searchAllMachine",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].machineName&&(o=!1)}),o&&a.push({value:t[e].machineName})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].machineNumber&&(i=!1)}),i&&o.push({value:t[e].machineNumber})}),i.deviceAll=a.concat(o),console.log(i.deviceAll)}})},500)}}),h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{margin:"0 auto","padding-top":"10px","padding-right":"15px",float:"initial"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"120px"}},[a("el-date-picker",{attrs:{type:"year",placeholder:"选择年份",size:"medium","value-format":"yyyy"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"设备类型"},model:{value:e.machine,callback:function(t){e.machine=t},expression:"machine"}},e._l(e.machineType,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入设备名称或设备编号","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.device,callback:function(t){e.$set(e.dataForm,"device",t)},expression:"dataForm.device"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"section-two"},[a("div",{staticClass:"titlebar"},[e._m(0),e._v(" "),a("span",[e._v("设备年度保养情况")]),e._v(" "),a("el-radio-group",{attrs:{size:"mini"},on:{change:e.chooseRadioA},model:{value:e.radio1,callback:function(t){e.radio1=t},expression:"radio1"}},[a("el-radio-button",{attrs:{label:"图形"}}),e._v(" "),a("el-radio-button",{attrs:{label:"表格"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isMaintainChart,expression:"isMaintainChart"}]},[a("Statistic-maintain-chart",{attrs:{height:e.tableHeight,data:e.chartResultA,columns:e.filterColumns,customColumns:e.filterCustomColumns},on:{findPage:e.findChartA}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMaintainChart,expression:"!isMaintainChart"}]},[a("Statistic-maintain-table",{attrs:{height:e.tableHeight,data:e.pageResultA,columns:e.filterColumnsA,rowstatus:e.tableRowClassNameA},on:{findPage:e.findPageA}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("i",{staticClass:"iconfont icon-ali-success"}),this._v("已保养")]),this._v(" "),t("li",[t("i",{staticClass:"iconfont icon-ali-error"}),this._v("未保养")]),this._v(" "),t("li",[t("i",{staticClass:"iconfont icon-ali-stop"}),this._v("待保养")])])}]};var f=a("VU/8")(p,h,!1,function(e){a("fOrC")},null,null);t.default=f.exports},"7jZw":function(e,t){},"8DXv":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),o=a.n(i),r=a("mvHQ"),n=a.n(r),l=a("woOf"),s=a.n(l),c=a("Dd8w"),d=a.n(c),u=a("NYxO"),m=a("7P3m"),p=a("AUIh"),h={name:"el-tree-select",props:{props:{type:Object,default:{value:"id",label:"title",children:"children"}},options:{type:Array,default:[]},value:{type:Number,default:null},clearable:{type:Boolean,default:!0},accordion:{type:Boolean,default:!1}},data:function(){return{valueId:null,valueTitle:"",defaultExpandedKey:[]}},mounted:function(){this.valueId=this.value,this.initHandle()},methods:{initHandle:function(){this.valueId&&(this.valueTitle=this.$refs.selectTree.getNode(this.valueId).data[this.props.label],this.$refs.selectTree.setCurrentKey(this.valueId),this.defaultExpandedKey=[this.valueId]),this.initScroll()},initScroll:function(){this.$nextTick(function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin: 0px; max-height: none; overflow: hidden;",t.forEach(function(e){return e.style.width=0})})},handleNodeClick:function(e){this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("getValue",{id:this.valueId,name:this.valueTitle}),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.valueId=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue",null)},clearSelected:function(){document.querySelectorAll("#tree-option .el-tree-node").forEach(function(e){return e.classList.remove("is-current")})}},watch:{value:function(){this.valueId=this.value,this.initHandle()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{value:e.valueTitle,clearable:e.clearable},on:{clear:e.clearHandle}},[a("el-option",{staticClass:"options",attrs:{value:e.valueTitle,label:e.valueTitle}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:e.accordion,data:e.options,props:e.props,"node-key":e.props.value,"default-expanded-keys":e.defaultExpandedKey},on:{"node-click":e.handleNodeClick}})],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(e){a("PuP0")},"data-v-174271ea",null).exports,b={components:{UserTable:m.default,SelectTree:g},data:function(){var e=this;return{width:"40%",tableHeight:null,isClearable:!0,isAccordion:!0,valueId:0,valueName:"",props:{value:"id",label:"groupName",children:"children"},size:"small",form:{date1:"",date2:""},role:[],roleId:"",roleName:"",filters:{name:""},columns:[],text:[],rowA:[],rowB:[],rowC:[],rowD:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageParams:{},pageResult:{},operation:!1,dialogVisible:!1,dialogVisibleB:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],type:[{required:!0,message:"请选择要进行保养的设备！",trigger:"blur"}],role:[{required:!0,message:"请选择该员工的用户角色，为该员工配置相应的权限！",trigger:"change"}],username:[{required:!0,message:"请填写员工姓名！",trigger:"blur"}]},refFormRules:{username:[{required:!0,message:"请填写员工姓名！",trigger:"blur"}],mobile:[{required:!0,validator:function(t,a,i){if(!a)return i(new Error("请填写手机号！"));var o={mobile:a};a==e.initMobile?(console.log("原手机号："+e.initMobile),i()):$.ajax({type:"GET",url:"/xaj/user/searchRepeat",data:o,success:function(e){1==e.status?i():i(new Error(e.msg))}})},trigger:"blur"}],valueId:[{required:!0,message:"请选择部门！",trigger:"change"}],icCardNum:[{required:!0,message:"请填写员工IC卡！",trigger:"blur"}]},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,file:"",role:"",user:""},refForm:{username:"",mobile:"",valueId:0,icCardNum:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},select:"",user:{},imageUrl:"",list:[{id:1,groupName:"生产部门",children:[{id:4,groupName:"总装车间",children:[{id:6,groupName:"装配班"}]},{id:5,groupName:"塑焊车间",children:[{id:7,groupName:"金工班"},{id:8,groupName:"注塑班"},{id:9,groupName:"模压班"},{id:10,groupName:"缠绕班"}]}]},{id:2,groupName:"质检部门",children:[]},{id:3,groupName:"研发中心",children:[]}],show:"",paramsAdd:{},userAll:[],userForm:{nameMobile:""},initMobile:"",id:""}},computed:d()({},Object(u.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}}),{optionData:function(){return this.list}}),methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.status=t.select,e.pageRequest.nameMobile=t.dataForm.user,t.pageRequest=e.pageRequest),t.$api.user.findPage(t.pageRequest).then(function(e){console.log(e),e.data.data.user.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data.data.user,console.log(t.pageResult)}).then(null!=e?e.callback:""),t.$api.user.findPage(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;""==e.dataForm.user&&(e.userForm.nameMobile=""),e.pageParams={currPage:1,pageSize:10,status:e.select,nameMobile:e.dataForm.user},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,e.$api.user.findPage(e.pageParams).then(function(t){console.log(t),t.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),e.pageResult=t.data,console.log(e.pageResult)}).then()},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){console.log(e);var t={id:e.params[0].id};console.log(t),$.ajax({type:"POST",url:"/xaj/user/deleteUser",data:t,success:function(e){console.log(e)}}).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm=s()({}),this.refForm=s()({}),this.valueId=0,this.valueName="",console.log($("#userName").val()),console.log($("#inputLengthB .el-input__inner").val())},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,console.log(e),this.initMobile=e.row.mobile,this.refForm={username:e.row.name,mobile:e.row.mobile,icCardNum:e.row.icCardNum},this.dataForm={role:e.row.roleId},this.valueName=e.row.groupName,this.valueId=e.row.groupId,this.id=e.row.id},submitForm:function(){var e=this;e.operation?e.$refs.refForm.validate(function(t){t&&e.$refs.dataForm.validate(function(t){t&&(console.log(e.valueId),null==e.valueId||0==e.valueId?(e.show=!0,$(".inputLengthB").addClass("is-error").removeClass("is-success")):(e.show=!1,$(".inputLengthB").addClass("is-success").removeClass("is-error"),e.editLoading=!0,e.paramsAdd={name:e.refForm.username,mobile:e.refForm.mobile,icCardNum:e.refForm.icCardNum,groupId:e.valueId,groupName:e.valueName,roleId:e.roleId},console.log(e.paramsAdd),$.ajax({type:"POST",url:"/xaj/user/addUser",data:e.paramsAdd,success:function(t){e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.$refs.refForm.resetFields(),1==t.status&&e.$message({message:"新增成功",type:"success"})}})))})}):e.$refs.refForm.validate(function(t){t&&e.$refs.dataForm.validate(function(t){t&&(console.log(e.valueId),null==e.valueId||0==e.valueId?(e.show=!0,$(".inputLengthB").addClass("is-error").removeClass("is-success")):(e.show=!1,$(".inputLengthB").addClass("is-success").removeClass("is-error"),e.editLoading=!0,e.paramsAdd={name:e.refForm.username,mobile:e.refForm.mobile,icCardNum:e.refForm.icCardNum,groupId:e.valueId,groupName:e.valueName,roleId:e.roleId,id:e.id},console.log(e.paramsAdd),$.ajax({type:"POST",url:"/xaj/user/updateUser",data:e.paramsAdd,success:function(t){e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.$refs.refForm.resetFields(),1==t.status&&e.$message({message:"修改成功",type:"success"})}})))})})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(p.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"name",label:"员工姓名",minWidth:90},{prop:"mobile",label:"手机",minWidth:110},{prop:"groupName",label:"所属部门",minWidth:90},{prop:"icCardNum",label:"员工IC卡",minWidth:110},{prop:"userName",label:"用户账户",minWidth:110},{prop:"roleName",label:"用户角色",minWidth:110},{prop:"creatTime",label:"创建时间",minWidth:120},{prop:"status",label:"状态",minWidth:80}],this.filterColumns=JSON.parse(n()(this.columns))},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},onChange:function(e,t){},querySearch:function(e,t){var a=this.userAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},handleSelect:function(e){console.log(e),this.userForm={nameMobile:e.value},console.log(this.userForm)},handleLock:function(e){var t=this;console.log(e.params),$.ajax({type:"POST",url:"/xaj/user/isEnable",data:e.params,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},handleReset:function(e){var t=this;console.log(e.params),$.ajax({type:"POST",url:"/xaj/user/resetPassword",data:e.params,success:function(e){console.log(e),t.dialogVisibleB=!0}}).then(null!=e?e.callback:"")},tableRowClassName:function(e){var t=e.row,a=e.rowIndex,i=$(".el-table .el-table__body-wrapper tbody tr:eq(0) td").length-1;"正常"==t.status?($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#3F51B5"}),this.rowA.indexOf(a)<0&&this.rowA.push(a),this.rowB.indexOf(a)<0&&this.rowB.push(a),this.rowC.indexOf(a)<0&&this.rowC.push(a),this.rowD.indexOf(a)<0&&this.rowD.push(a),this.text.indexOf(a)<0&&this.text.push(a)):"禁用"==t.status&&($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#E51C23"}),this.rowA.indexOf(a)<0&&this.rowA.push(a),this.rowD.indexOf(a)<0&&this.rowD.push(a),this.rowB.indexOf(a)>-1&&this.rowB.splice(this.rowB.indexOf(a),1),this.rowC.indexOf(a)>-1&&this.rowC.splice(this.rowC.indexOf(a),1),this.text.indexOf(a)>-1&&this.text.splice(this.text.indexOf(a),1))},handleNodeClick:function(e){console.log(e)},getValue:function(e){console.log(e),null!=e&&(this.valueId=e.id,this.valueName=e.name),console.log(this.valueId),null==e?(this.valueId=0,this.show=!0,$(".inputLengthB").addClass("is-error").removeClass("is-success")):(this.show=!1,$(".inputLengthB").addClass("is-success").removeClass("is-error"))},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png",a=e.size/1024/1024<1;return console.log(e.size),t||this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 1MB!"),t&&a},selectChange:function(e){console.log(e),console.log(this.dataForm.role),this.roleId=e,console.log(this.roleId)}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,$.ajax({type:"GET",url:"/xaj/user/searchGroup",success:function(e){console.log(void 0===e?"undefined":o()(e)),i.list=e}}),$.ajax({type:"GET",url:"/xaj/user/searchRoleSelection",success:function(e){e.forEach(function(e,t){i.role.push({label:e.roleName,value:e.id})})}}),console.log(i.list),i.initColumns(),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/user/searchAllUsers",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].name&&(o=!1)}),o&&a.push({value:t[e].name})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].mobile&&(i=!1)}),i&&o.push({value:t[e].mobile})}),i.userAll=a.concat(o),console.log(i.userAll)}})},500)}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-left"},[e._m(0),e._v(" "),a("div",{staticClass:"userpanel-cntent"},[a("el-tree",{attrs:{data:e.optionData,props:e.props},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),a("div",{staticClass:"page-right"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"所有状态"},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"禁用",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入员工姓名或手机号","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.user,callback:function(t){e.$set(e.dataForm,"user",t)},expression:"dataForm.user"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("User-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns,rowstatus:e.tableRowClassName,rowA:e.rowA,rowB:e.rowB,rowC:e.rowC,rowD:e.rowD,text:e.text},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete,"handle-lock":e.handleLock,"handle-reset":e.handleReset}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"userDialog",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"120px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[a("el-form",{ref:"refForm",attrs:{inline:!0,"label-width":"120px",model:e.refForm,rules:e.refFormRules}},[a("el-form-item",{attrs:{label:"员工姓名",prop:"username"}},[a("el-input",{attrs:{id:"userName"},model:{value:e.refForm.username,callback:function(t){e.$set(e.refForm,"username",t)},expression:"refForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{id:"userMobile"},model:{value:e.refForm.mobile,callback:function(t){e.$set(e.refForm,"mobile",t)},expression:"refForm.mobile"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"所属部门"}},[a("SelectTree",{attrs:{props:e.props,options:e.optionData,value:e.valueId,clearable:e.isClearable,accordion:e.isAccordion},on:{getValue:function(t){return e.getValue(t)}}}),e._v(" "),a("transition",{attrs:{name:"zoom-top"}},[e.show?a("div",{staticClass:"el-form-item__error"},[e._v("请选择部门！")]):e._e()])],1),e._v(" "),a("el-form-item",{attrs:{label:"员工IC卡",prop:"icCardNum"}},[a("el-input",{attrs:{id:"userIcard"},model:{value:e.refForm.icCardNum,callback:function(t){e.$set(e.refForm,"icCardNum",t)},expression:"refForm.icCardNum"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色",prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择用户角色"},on:{change:e.selectChange},model:{value:e.dataForm.role,callback:function(t){e.$set(e.dataForm,"role",t)},expression:"dataForm.role"}},e._l(e.role,function(t,i){return a("el-option",{key:i,attrs:{label:t.label},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",width:e.width,visible:e.dialogVisibleB,"custom-class":"forgetDialog",center:""},on:{"update:visible":function(t){e.dialogVisibleB=t}}},[a("div",{staticClass:"forget-content"},[a("i",{staticClass:"el-icon-success"}),e._v("\n    密码重置完成！\n  ")])])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"userpanel-title"},[t("i",{staticClass:"el-icon-s-grid"}),this._v("组织机构")])}]};var y=a("VU/8")(b,v,!1,function(e){a("0PzS")},null,null);t.default=y.exports},"954j":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"ConfigurationTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowA:Array,rowB:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){t.$message({message:"删除成功",type:"success"}),t.findPage(),t.loading=!1}})}).catch(function(){})},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},handleFill:function(e,t){var a=[e,t];this.$emit("handle-fill",a)},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3037138854)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("I5O9")},"data-v-4edb92a0",null);t.default=s.exports},"9GPq":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"ConfigurationTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,text:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,groupId:"",nameCode:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.pageRequest.groupId=parseInt(localStorage.getItem("groupId")),this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},handleLock:function(e,t){var a=this,i="正常"==t.status?"报废":"启用";this.$confirm("您确定"+i+"该内容吗？","确认").then(function(){switch(t.status){case"正常":t.status=1;break;case"报废":t.status=0}var e={id:t.id,status:t.status};a.loading=!0;a.$emit("handle-lock",{params:e,callback:function(e){a.findPage(),a.loading=!1}})}).catch(function(){})},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){t.$message({message:"删除成功",type:"success"}),t.findPage(),t.loading=!1}})}).catch(function(){})},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonC:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showText:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"row-class-name":e.rowstatus,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"230","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showText(t.$index,e.text)?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonA(t.$index,e.rowA),expression:"showButtonA(scope.$index,rowA)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleLock(t.$index,t.row)}}},[e._v("报废")]):a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonA(t.$index,e.rowA),expression:"showButtonA(scope.$index,rowA)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleLock(t.$index,t.row)}}},[e._v("启用")]),e._v(" "),e.showButtonB(t.$index,e.rowB)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]):e._e(),e._v(" "),e.showButtonC(t.$index,e.rowC)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}],null,!1,2808155175)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("zke3")},"data-v-cc6fde02",null);t.default=s.exports},ABek:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("NYxO"),d=a("le0F"),u=a("AUIh"),m={components:{UserAuthorityTable:d.default},data:function(){var e=this;return{size:"small",tableHeight:null,form:{date1:"",date2:""},filters:{name:""},columns:[],rowA:[],rowB:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],type:[{required:!0,message:"请选择要进行保养的设备！",trigger:"blur"}],time:[{required:!0,message:"设置该类型设备的保养时间，系统自动到时通知相关责任人！",trigger:"blur"}]},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,file:"",type:"",time:"",planProduction:"",roleName:"",content:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},user:{},department:"",addParams:{},allData:[],allDataCopy:[],authorityData:[],operator:[],tables:[{title:"任务管理",index:0,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:1,distributorsInfo:[{partitionName:"",selected:!1,partitionId:0,childrenId:1,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]},{title:"生产管理",index:1,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:2,distributorsInfo:[{partitionName:"",selected:!1,partitionId:0,childrenId:2,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]},{title:"维保管理",index:2,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:3,distributorsInfo:[{partitionName:"保养计划",selected:!1,partitionId:3,childrenId:10,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"保养记录",selected:!1,partitionId:3,childrenId:11,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"维修记录",selected:!1,partitionId:3,childrenId:12,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]},{title:"配置管理",index:3,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:4,distributorsInfo:[{partitionName:"工序管理",selected:!1,partitionId:4,childrenId:15,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"设备管理",selected:!1,partitionId:4,childrenId:16,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"物料管理",selected:!1,partitionId:4,childrenId:17,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"工艺路线管理",selected:!1,partitionId:4,childrenId:18,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]},{title:"用户管理",index:4,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:5,distributorsInfo:[{partitionName:"员工管理",selected:!1,partitionId:5,childrenId:19,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"权限管理",selected:!1,partitionId:5,childrenId:20,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]},{title:"我的工单",index:5,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:6,distributorsInfo:[{partitionName:"",selected:!1,partitionId:0,childrenId:6,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]},{title:"统计分析",index:6,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:7,distributorsInfo:[{partitionName:"生产追溯",selected:!1,partitionId:7,childrenId:21,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"人员绩效",selected:!1,partitionId:7,childrenId:22,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"设备绩效",selected:!1,partitionId:7,childrenId:23,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"设备维保",selected:!1,partitionId:7,childrenId:24,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]},{title:"工艺管理",index:7,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:8,distributorsInfo:[{partitionName:"NC程序",selected:!1,partitionId:8,childrenId:13,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"工艺参数",selected:!1,partitionId:8,childrenId:14,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]},{title:"管理平台",index:8,ischeckAll:!1,indeterminate:!1,parentId:0,menuId:9,distributorsInfo:[{partitionName:"综合信息看板",selected:!1,partitionId:9,childrenId:25,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"生产进度看板",selected:!1,partitionId:9,childrenId:26,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]},{partitionName:"设备运行监测",selected:!1,partitionId:9,childrenId:27,indeterminate:!1,children:[{id:"1",fieldName:"新增",fieldTableName:"新增",selected:!1},{id:"2",fieldName:"修改",fieldTableName:"修改",selected:!1},{id:"3",fieldName:"删除",fieldTableName:"删除",selected:!1},{id:"4",fieldName:"查看",fieldTableName:"查看",selected:!1}]}]}]}},computed:s()({},Object(c.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){console.log(e);var t=this;t.$api.user.findPageAuthority().then(function(e){e.data.data.authority.data;t.pageResult=e.data.data.authority,console.log(t.pageResult)}).then(null!=e?e.callback:""),t.$api.user.findPageAuthority().then(function(e){e.data;t.pageResult=e,console.log(t.pageResult)}).then(null!=e?e.callback:"")},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){console.log(e);var t={id:e.params[0].id};$.ajax({type:"POST",url:"/xaj/user/deleteRole",data:t,success:function(e){console.log(e)}}).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm=n()({}),this.authorityData=[]},handleEdit:function(e){console.log(e),this.dialogVisible=!0,this.operation=!1,this.dataForm={roleName:e.row.roleName,content:e.row.description}},submitForm:function(){var e=this;e.operation?e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.addParams={roleName:e.dataForm.roleName,description:e.dataForm.content,data:o()(e.allDataCopy)},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/user/addRole",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),1==t.status&&e.$message({message:"新增成功",type:"success"})}}))}):e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.addParams={roleName:e.dataForm.roleName,description:e.dataForm.content,data:o()(e.allDataCopy)},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/user/updateRole",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),1==t.status&&e.$message({message:"修改成功",type:"success"})}}))})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(u.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"roleName",label:"角色名称",minWidth:200},{prop:"userList",label:"用户列表",minWidth:300},{prop:"description",label:"描述",minWidth:500}],this.filterColumns=JSON.parse(o()(this.columns))},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},onChange:function(e,t){},handleCheckAllChange:function(e,t,a,i){if(this.tables[e].ischeckAll=t,1==t){this.tables[e].indeterminate=!1;for(var o=0,r=this.tables[e].distributorsInfo.length;o<r;o++){this.tables[e].distributorsInfo[o].selected=t;for(var n=0,l=this.tables[e].distributorsInfo[o].children.length;n<l;n++)this.tables[e].distributorsInfo[o].children[n].selected=t}}else{this.tables[e].indeterminate=!1;for(o=0,r=this.tables[e].distributorsInfo.length;o<r;o++){this.tables[e].distributorsInfo[o].selected=t;for(n=0,l=this.tables[e].distributorsInfo[o].children.length;n<l;n++)this.tables[e].distributorsInfo[o].children[n].selected=t}}this.getParentSelected(e)},handleCheckedChildrenAllChange:function(e,t,a,i,o){this.tables[e].distributorsInfo[t].selected=o,0==o&&(this.tables[e].distributorsInfo[t].indeterminate=!1);var r=this.tables[e].distributorsInfo[t].children;if(r)for(var n=0,l=r.length;n<l;n++)r[n].selected=o;this.getIsCheckAll(e),this.getParentSelected(e)},handleCheckedChildrenChange:function(e,t,a,i,o,r){for(var n=this.tables[e].distributorsInfo[t].children,l=0,s=0,c=n.length,d=0;d<c;d++)a==n[d].id&&(n[d].selected=r),1==n[d].selected&&l++,0==n[d].selected&&s++;l==c?(this.tables[e].distributorsInfo[t].selected=!0,this.tables[e].distributorsInfo[t].indeterminate=!1):s==c?(this.tables[e].distributorsInfo[t].selected=!1,this.tables[e].distributorsInfo[t].indeterminate=!1):(this.tables[e].distributorsInfo[t].selected=!1,this.tables[e].distributorsInfo[t].indeterminate=!0),this.getIsCheckAll(e),this.getParentSelected(e)},getIsCheckAll:function(e){var t=0,a=0,i=this.tables[e].distributorsInfo.length,o=0,r=0,n=this.tables[e].distributorsInfo[0].children.length;if(i>1){for(var l=0;l<i;l++)1==this.tables[e].distributorsInfo[l].selected&&t++,0==this.tables[e].distributorsInfo[l].selected&&a++;t==i?(this.tables[e].ischeckAll=!0,this.tables[e].indeterminate=!1):a==i?(this.tables[e].ischeckAll=!1,this.tables[e].indeterminate=!1):(this.tables[e].ischeckAll=!1,this.tables[e].indeterminate=!0)}else{for(var s=0;s<n;s++)1==this.tables[e].distributorsInfo[0].children[s].selected&&o++,0==this.tables[e].distributorsInfo[0].children[s].selected&&r++;o==n?(this.tables[e].ischeckAll=!0,this.tables[e].indeterminate=!1):r==n?(this.tables[e].ischeckAll=!1,this.tables[e].indeterminate=!1):(this.tables[e].ischeckAll=!1,this.tables[e].indeterminate=!0)}},getParentSelected:function(e){var t=this;t.authorityData=[],$.each(t.tables[e].distributorsInfo,function(e,a){console.log(a),t.operator=[],$.each(a.children,function(e,a){switch(console.log(a.selected),a.id){case"1":a.id="s_add";break;case"2":a.id="s_update";break;case"3":a.id="s_delete";break;case"4":a.id="s_search"}1==a.selected?t.operator[e]=a.id:t.operator[e]=""});for(var i=0;i<t.operator.length;i++)""==t.operator[i]&&(t.operator.splice(i,1),i-=1);0==t.operator.length?t.authorityData[e]={}:t.authorityData[e]={parentId:a.partitionId,menuId:a.childrenId,operator:t.operator.join(",")}}),t.allData[e]=t.authorityData,console.log(t.allData),t.allDataCopy=[],t.allData.map(function(e,a,i){t.allDataCopy=t.allDataCopy.concat(e)}),console.log(t.allDataCopy)}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,i.initColumns(),console.log(i.filterColumns),console.log(i.rowA,i.rowB,i.text)}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("User-authority-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"authorityDialog",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"100px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[a("el-form-item",{staticClass:"inputLength",attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{id:"roleName"},model:{value:e.dataForm.roleName,callback:function(t){e.$set(e.dataForm,"roleName",t)},expression:"dataForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"此处输入对该角色拥有权限的描述",resize:"none"},model:{value:e.dataForm.content,callback:function(t){e.$set(e.dataForm,"content",t)},expression:"dataForm.content"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,p,!1,function(e){a("C7Ib")},null,null);t.default=h.exports},C7Ib:function(e,t){},C8xy:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("Dd8w"),n=a.n(r),l=a("NYxO"),s=a("ak8d"),c=(a("AUIh"),{components:{StatisticEquipmentTable:s.default},data:function(){var e=this;return{inputs:[{}],size:"small",tableHeight:null,form:{date1:"",date2:""},select:"byDay",filters:{name:""},columns:[],rowA:[],rowB:[],rowC:[],rowD:[],rowE:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageParams:{currPage:1,pageSize:10},chartRequest:{},pageResult:{},operation:!0,dialogVisible:!1,action:!0,dialogVisibleB:!1,editLoading:!1,editLoadingB:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],decNum:[{required:!0,message:"请输入数量",trigger:"blur"}]},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,decNum:"",device:""},refForm:{dev_value:"",per_value:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",working:{},planTime:{date1:"",date2:""},isTable:!1,radio1:"图形",mychartOne:"",xAxisDate:["6/1","6/2","6/3","6/4","6/5","6/6","6/7","6/8","6/9","6/10","6/11","6/12","6/13","6/14","6/15","6/16","6/17","6/18","6/19","6/20","6/21","6/22","6/23","6/24","6/25","6/26","6/27","6/28","6/29","6/30"],productionTime:[4.2,4.2,3.2,3.4,4.2,2.8,1.8,1.8,1.8,1.6,2.8,1,2.8,4.5,4.5,5.2,5.2,3.2,3.2,4.3,1.9,1.9,2.9,2.9,1,4.3,1.9,3.1,3.1,4.2],startTime:[5.8,5.8,4.8,5.2,5.8,3.5,2.5,2.5,2.5,1.8,3.7,1.2,3.7,7.2,7.2,7.8,7.8,4.2,4.2,7.1,3.1,3.1,3.9,3.9,1.1,7.1,2.9,4.5,4.5,5.8],stackTime:[],dateArr:[],deviceAll:[],deviceForm:{nameCode:""},chart_fontSize_10:10,chart_fontSize_14:14}},computed:n()({},Object(l.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),watch:{"$store.state.app.collapse":function(e){this.mychartOne.resize()}},methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.period=t.select,e.pageRequest.nameCode=t.dataForm.device,"byYear"==t.select?(e.pageRequest.startTime=t.form.date1,e.pageRequest.endTime=t.form.date2):(e.pageRequest.startTime=t.dateArr[0],e.pageRequest.endTime=t.dateArr[1]),t.pageRequest=e.pageRequest),t.$api.statistic.findPageEquipment(t.pageRequest).then(function(e){console.log(e),e.data.data.equipment_list.data.forEach(function(e,t){}),t.pageResult=e.data.data.equipment_list,console.log(t.pageResult)}).then(null!=e?e.callback:""),$.get("/xaj/statistic/searchEquipmentPerformanceList",t.pageRequest).then(function(e){console.log(e),e.data.forEach(function(e,t){}),t.pageResult=e,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e,t,a=this;null==a.dateArr&&(a.dateArr=[]),""!=a.form.date1&&null!=a.form.date1||(a.form.date1=void 0),""!=a.form.date2&&null!=a.form.date2||(a.form.date2=void 0),""==a.dataForm.device&&(a.deviceForm.nameCode=""),"byYear"==a.select?(e=a.form.date1,t=a.form.date2):(e=a.dateArr[0],t=a.dateArr[1]),a.pageParams={currPage:1,pageSize:10,startTime:e,endTime:t,period:a.select,nameCode:a.dataForm.device},a.pageRequest.pageSize=10,a.pageRequest.currPage=1,$.get("/xaj/statistic/searchEquipmentPerformanceList",a.pageParams).then(function(e){console.log(e),e.data.forEach(function(e,t){}),a.pageResult=e,console.log(a.pageResult)}).then(),a.findChart()},submitForm:function(){var e=this;e.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0,e.operation?$.ajax({type:"GET",url:"/xaj/production/splitOrder",data:e.paramsSplit,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.inputs=[{}]}}):$.ajax({type:"POST",url:"/xaj/production/sendOrder",data:e.paramsSend,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.refForm.resetFields()}})})})},initColumns:function(){this.columns=[{prop:"machine",label:"设备名称",minWidth:80},{prop:"machineNumber",label:"设备编号",minWidth:80},{prop:"groupName",label:"所属车间",minWidth:80},{prop:"materialName",label:"物料名称",minWidth:120},{prop:"materialCode",label:"物料编码",minWidth:100},{prop:"specifications",label:"规格型号",minWidth:90},{prop:"productionProcessesName",label:"生产工序",minWidth:80},{prop:"name",label:"生产人员",minWidth:80},{prop:"nowQuantity",label:"生产数量",minWidth:80},{prop:"productionStartTime",label:"开始时间",minWidth:100},{prop:"updateTime",label:"完成时间",minWidth:100},{prop:"productionTime",label:"生产用时",minWidth:100}],this.filterColumns=JSON.parse(o()(this.columns))},chooseRadio:function(e){"图形"==e?(this.isTable=!1,this.findChart()):this.isTable=!0},querySearch:function(e,t){var a=this.deviceAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},handleSelect:function(e){console.log(e),this.deviceForm={nameCode:e.value},console.log(this.deviceForm)},findChart:function(){var e,t,a=this;"byYear"==a.select?(e=a.form.date1,t=a.form.date2):(e=a.dateArr[0],t=a.dateArr[1]),a.chartRequest={period:a.select,startTime:e,endTime:t,nameCode:a.dataForm.device},a.xAxisDate=[],a.startTime=[],a.productionTime=[],a.stackTime=[],a.$api.statistic.findChartEquipment(a.chartRequest).then(function(e){console.log(e);var t=e.data.data.equipmemt_chart.data;$.each(t,function(e,t){if("byYear"==a.select)var i=t.nowDate+"年";else(i=t.nowDate.split("-")).length<3?(i.splice(0,1),i+="月"):(i.splice(0,1),i=i.join("/"));console.log(i),a.xAxisDate.push(i),a.startTime.push(t.workingTime),a.productionTime.push(t.productionTime),a.stackTime.push(((100*t.workingTime-100*t.productionTime)/100).toFixed(1)),console.log(a.stackTime),console.log(a.xAxisDate,a.startTime,a.productionTime)}),a.chart_fontSize_10=10*document.documentElement.clientWidth/1920*1,a.chart_fontSize_14=10*document.documentElement.clientWidth/1920*1.4,a.mychartOne=a.$echarts.init(document.getElementById("job")),setTimeout(function(){a.mychartOne.setOption({grid:{top:8*a.chart_fontSize_10,left:7*a.chart_fontSize_10,right:7*a.chart_fontSize_10},legend:{left:"center",top:"top",textStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},selectedMode:!1,data:[{name:"生产时长(hour)",icon:"rect"},{name:"开机时长(hour)",icon:"rect"}]},xAxis:{axisLine:{lineStyle:{color:"#848080"}},axisTick:{inside:!0,length:2*a.chart_fontSize_10,lineStyle:{color:"#848080"}},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular",interval:0},data:a.xAxisDate},yAxis:[{name:"单位：hour",nameTextStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},min:0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},splitLine:{show:!0,lineStyle:{color:"#C1C0C0"}}},{name:"单位：hour",nameTextStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},min:0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},splitLine:{show:!1}}],series:[{type:"bar",name:"生产时长(hour)",yAxisIndex:0,stack:"时长",label:{show:!0,color:"#FFF",fontSize:a.chart_fontSize_10,position:"insideTop",fontFamily:"SourceHanSansSC-regular"},itemStyle:{color:"#8BC34A",borderColor:"#8BC34A"},data:a.productionTime},{type:"bar",name:"开机时长(hour)",yAxisIndex:0,barMinHeight:2*a.chart_fontSize_10,stack:"时长",barWidth:"80%",label:{show:!0,color:"#FFF",fontSize:a.chart_fontSize_10,position:"insideTop",fontFamily:"SourceHanSansSC-regular",formatter:function(e){return a.startTime[e.dataIndex]}},itemStyle:{color:"#485ABF",borderColor:"#485ABF"},data:a.stackTime}]})},500)}).then(),$.get("/xaj/statistic/searchEquipmentPerformanceChart",a.chartRequest).then(function(e){console.log(e);var t=e;$.each(t,function(e,t){if("byYear"==a.select)var i=t.nowDate+"年";else(i=t.nowDate.split("-")).length<3?(i.splice(0,1),i+="月"):(i.splice(0,1),i=i.join("/"));console.log(i),a.xAxisDate.push(i),a.startTime.push(t.workingTime),a.productionTime.push(t.productionTime),a.stackTime.push(((100*t.workingTime-100*t.productionTime)/100).toFixed(1)),console.log(a.stackTime),console.log(a.xAxisDate,a.startTime,a.productionTime)}),a.chart_fontSize_10=10*document.documentElement.clientWidth/1920*1,a.chart_fontSize_14=10*document.documentElement.clientWidth/1920*1.4,a.mychartOne=a.$echarts.init(document.getElementById("job")),setTimeout(function(){a.mychartOne.setOption({grid:{top:8*a.chart_fontSize_10,left:7*a.chart_fontSize_10,right:7*a.chart_fontSize_10},legend:{left:"center",top:"top",textStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},selectedMode:!1,data:[{name:"生产时长(hour)",icon:"rect"},{name:"开机时长(hour)",icon:"rect"}]},xAxis:{axisLine:{lineStyle:{color:"#848080"}},axisTick:{inside:!0,length:2*a.chart_fontSize_10,lineStyle:{color:"#848080"}},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular",interval:0},data:a.xAxisDate},yAxis:[{name:"单位：hour",nameTextStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},min:0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},splitLine:{show:!0,lineStyle:{color:"#C1C0C0"}}},{name:"单位：hour",nameTextStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},min:0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},splitLine:{show:!1}}],series:[{type:"bar",name:"生产时长(hour)",yAxisIndex:0,stack:"时长",label:{show:!0,color:"#FFF",fontSize:a.chart_fontSize_10,position:"insideTop",fontFamily:"SourceHanSansSC-regular"},itemStyle:{color:"#8BC34A",borderColor:"#8BC34A"},data:a.productionTime},{type:"bar",name:"开机时长(hour)",yAxisIndex:0,barMinHeight:2*a.chart_fontSize_10,stack:"时长",barWidth:"80%",label:{show:!0,color:"#FFF",fontSize:a.chart_fontSize_10,position:"insideTop",fontFamily:"SourceHanSansSC-regular",formatter:function(e){return a.startTime[e.dataIndex]}},itemStyle:{color:"#485ABF",borderColor:"#485ABF"},data:a.stackTime}]})},500)}).then()}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-270,i.initColumns(),console.log(i.filterColumns),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/configuration/searchAllMachine",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].machine&&(o=!1)}),o&&a.push({value:t[e].machine})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].machineNumber&&(i=!1)}),i&&o.push({value:t[e].machineNumber})}),i.deviceAll=a.concat(o)}})},500),i.findChart(),window.onresize=function(){i.mychartOne.resize()}}}),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{margin:"0 auto","padding-top":"10px","padding-right":"15px",float:"initial"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"请选择"},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"按日",value:"byDay"}}),e._v(" "),a("el-option",{attrs:{label:"按月",value:"byMonth"}}),e._v(" "),a("el-option",{attrs:{label:"按年",value:"byYear"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"300px"}},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"byDay"==e.select,expression:"select=='byDay'"}],attrs:{size:"medium",type:"daterange","range-separator":"—","start-placeholder":"起始时间","end-placeholder":"结束时间"},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"byMonth"==e.select,expression:"select=='byMonth'"}],attrs:{size:"medium",type:"monthrange","range-separator":"—","start-placeholder":"起始时间","end-placeholder":"结束时间"},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}}),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"byYear"==e.select,expression:"select=='byYear'"}],attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"起始时间",size:"medium","picker-options":e.pickerOptions0,clearable:!1},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"byYear"==e.select,expression:"select=='byYear'"}],staticClass:"line",staticStyle:{color:"#303133"},attrs:{span:2}},[e._v("—")]),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"byYear"==e.select,expression:"select=='byYear'"}],attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"结束时间",size:"medium","picker-options":e.pickerOptions1,clearable:!1},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入设备名称或设备编号","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.device,callback:function(t){e.$set(e.dataForm,"device",t)},expression:"dataForm.device"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"titlebar"},[a("span",[e._v("设备工作绩效")]),e._v(" "),a("el-radio-group",{attrs:{size:"mini"},on:{change:e.chooseRadio},model:{value:e.radio1,callback:function(t){e.radio1=t},expression:"radio1"}},[a("el-radio-button",{attrs:{label:"图形"}}),e._v(" "),a("el-radio-button",{attrs:{label:"表格"}})],1)],1),e._v(" "),e.isTable?e._e():a("div",{staticStyle:{position:"relative"},style:{height:e.tableHeight+"px"}},[a("div",{staticClass:"chart-title chart-title-left"},[e._v("生产时长")]),e._v(" "),a("div",{staticClass:"chart-title chart-title-right"},[e._v("开机时长")]),e._v(" "),a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"job"}})]),e._v(" "),e.isTable?a("div",[a("Statistic-equipment-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns},on:{findPage:e.findPage}})],1):e._e()])},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("SYLk")},null,null);t.default=u.exports},"E+mM":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("NYxO"),d=a("c0YS"),u=a("AUIh"),m=a("mtWM"),p=a.n(m),h={components:{ConfigurationRouteTable:d.default},data:function(){var e=this;return{size:"small",tableHeight:null,form:{date1:"",date2:""},filters:{name:""},columns:[],rowA:[],rowB:[],rowC:[],text:[],filterColumns:[],pageRequest:{groupId:"",currPage:1,pageSize:10},pageParams:{},pageResult:{},operation:!1,dialogVisible:!1,dialogVisibleB:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入工艺路线名称",trigger:"blur"}],code:[{required:!0,validator:function(t,a,i){if(!a)return i(new Error("请输入工艺路线编码"));var o={routingCode:a};a==e.initRouteCode?(console.log("原编码："+e.initRouteCode),i()):$.ajax({type:"GET",url:"/xaj/configuration/sameRouting",data:o,success:function(e){1==e.status?i():i(new Error(e.msg))}})},trigger:"blur"}],number:[{required:!0,validator:function(t,a,i){if(!a)return i(new Error("请输入物料编码"));var o={materialCode:a};a==e.initMaterialCode?(console.log("原编码："+e.initMaterialCode),i()):$.ajax({type:"GET",url:"/xaj/configuration/sameRoutingMaterial",data:o,success:function(e){1==e.status?i():i(new Error(e.msg))}})},trigger:"blur"}],material:[{required:!0,message:"请输入关联物料",trigger:"blur"}]},dataForm:{id:0,password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,file:"",type:"",time:"",planProduction:"",name:"",code:"",number:"",material:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},select:"",materialAll:[],material:{},materialForm:{name:"",code:"",type:""},routeAll:[],routeForm:{nameCode:""},equipment:{procedure:[]},show:!0,addParams:{},procedures:[],welfareOptions:[],initMaterialCode:"",initRouteCode:"",id:"",downloadUrl:"",fileUrl:""}},computed:s()({},Object(c.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.status=t.select,e.pageRequest.nameCode=t.dataForm.route,t.pageRequest=e.pageRequest),t.$api.configuration.findPageRoute(t.pageRequest).then(function(e){console.log(e),e.data.data.routing.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data.data.routing,console.log(t.pageResult)}).then(null!=e?e.callback:""),t.$api.configuration.findPageRoute(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;""==e.dataForm.route&&(e.routeForm.nameCode=""),e.pageParams={currPage:1,pageSize:10,groupId:parseInt(localStorage.getItem("groupId")),status:e.select,nameCode:e.dataForm.route},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,e.$api.configuration.findPageRoute(e.pageParams).then(function(t){console.log(t),t.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),e.pageResult=t.data,console.log(e.pageResult)}).then()},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){console.log(e);var t=this,a={id:e.params[0].id};$.ajax({type:"POST",url:"/xaj/configuration/deleteRouting",data:a,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm=n()({}),this.materialForm=n()({}),this.welfareOptions=[],this.equipment.procedure=[],this.show=!0},handleEdit:function(e){console.log(e),this.dialogVisible=!0,this.operation=!1,this.initMaterialCode=e.row.materialCode,this.initRouteCode=e.row.routingCode,this.dataForm={name:e.row.routingName,code:e.row.routingCode,number:e.row.materialCode,material:e.row.materialName+e.row.materialCode},this.materialForm={name:e.row.materialName},this.welfareOptions=[],this.equipment.procedure=[],this.show=!0,this.id=e.row.id},handleImport:function(){var e=p.a.defaults.baseURL;console.log(e);var t=parseInt(localStorage.getItem("groupId")),a=localStorage.getItem("name");this.dialogVisibleB=!0,this.downloadUrl=e+"/xaj/configuration/downloadRoutingTp",this.fileUrl=e+"/xaj/configuration/importRouting?groupId="+t+"&userName="+a},handleLock:function(e){var t=this;$.ajax({type:"POST",url:"/xaj/configuration/updateMaterialStatus",data:e.params,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},submitForm:function(){var e=this;e.operation?e.$refs.dataForm.validate(function(t){t&&(e.show||(e.editLoading=!0,e.addParams={routingCode:e.dataForm.code,routingName:e.dataForm.name,materialCode:e.dataForm.number,materialName:e.materialForm.name,groupId:parseInt(localStorage.getItem("groupId")),data:o()(e.welfareOptions[e.welfareOptions.length-1])},console.log(e.addParams),$.ajax({type:"POST",url:"/xaj/configuration/addRouting",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.$refs.materialForm.resetFields(),e.welfareOptions=[],e.equipment.procedure=[],1==t.status&&e.$message({message:"新增成功",type:"success"})}})))}):e.$refs.dataForm.validate(function(t){t&&(e.show||(e.editLoading=!0,e.addParams={routingCode:e.dataForm.code,routingName:e.dataForm.name,materialCode:e.dataForm.number,materialName:e.materialForm.name,groupId:parseInt(localStorage.getItem("groupId")),data:o()(e.welfareOptions[e.welfareOptions.length-1]),id:e.id},console.log(e.addParams),$.ajax({type:"POST",url:"/xaj/configuration/updateRouting",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.$refs.materialForm.resetFields(),e.welfareOptions=[],e.equipment.procedure=[],1==t.status&&e.$message({message:"修改成功",type:"success"})}})))})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(u.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"routingName",label:"工艺路线名称",minWidth:160},{prop:"routingCode",label:"工艺路线编码",minWidth:120},{prop:"materialName",label:"物料名称",minWidth:160},{prop:"materialCode",label:"物料编码",minWidth:100},{prop:"processesNameAll",label:"关联工作中心",minWidth:240},{prop:"status",label:"状态",minWidth:80}],this.filterColumns=JSON.parse(o()(this.columns))},handleSuccess:function(e,t,a){var i=this;console.log(e),setTimeout(function(){i.dialogVisibleB=!1,i.findPage(null),i.$message({message:"导入成功",type:"success"})},500)},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},beforeUpload:function(e){console.log(e);var t=e.name;this.dataForm.file=t,$("#myFile").val(t);var a=t.split(".");if(console.log(a[a.length-1].toLowerCase()),"xls"==a[a.length-1].toLowerCase()||"xlsx"==a[a.length-1].toLowerCase())return this.tips="导入成功",this.isSuccess=!0,!0;this.tips="文件类型错误",this.isSuccess=!1},onChange:function(e,t){},querySearch:function(e,t){var a=this.materialAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},loadAll:function(){},handleSelect:function(e){console.log(e),this.materialForm={name:e.name,code:e.code,type:e.type}},querySearch2:function(e,t){var a=this.routeAll;t(e?a.filter(this.createFilter2(e)):a)},createFilter2:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},handleSelect2:function(e){console.log(e),this.routeForm={nameCode:e.value}},tableRowClassName:function(e){var t=e.row,a=e.rowIndex,i=$(".el-table .el-table__body-wrapper tbody tr:eq(0) td").length-1;"正常"==t.status?($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#3F51B5"}),this.rowB.indexOf(a)<0&&this.rowB.push(a),this.rowC.indexOf(a)<0&&this.rowC.push(a)):"禁用"==t.status&&($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#E51C23"}),this.rowB.indexOf(a)>-1&&this.rowB.splice(this.rowB.indexOf(a),1),this.rowC.indexOf(a)>-1&&this.rowC.splice(this.rowC.indexOf(a),1))},handleWelfareTreatmentChange:function(e,t,a){e.length;this.equipment.procedure=e,console.log(e),0==this.equipment.procedure.length?this.show=!0:this.show=!1;var i=$("input:checkbox[name='fulicheckbox']:checked").map(function(e,t){return JSON.parse($(t).parents(".el-checkbox").attr("data-value"))}).get();console.log(i),this.welfareOptions.push(i)}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,i.initColumns(),console.log(i.filterColumns),$.ajax({type:"GET",url:"/xaj/configuration/findAllProductionProcesses",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)}),$.each(t,function(e,t){var a={code:t.productionProcessesCode,name:t.productionProcessesName};a=o()(a),i.procedures.push({label:t.productionProcessesName,value:a})})}}),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/configuration/searchAllMaterial",data:{groupId:parseInt(localStorage.getItem("groupId"))},success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)}),$.each(t,function(e,t){i.materialAll.push({value:t.material,name:t.materialName,code:t.materialCode,type:t.specifications})}),console.log(i.materialAll)}}),$.ajax({type:"GET",url:"/xaj/configuration/searchAllRouting",data:{groupId:parseInt(localStorage.getItem("groupId"))},success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].routingName&&(o=!1)}),o&&a.push({value:t[e].routingName})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].routingCode&&(i=!1)}),i&&o.push({value:t[e].routingCode})}),i.routeAll=a.concat(o),console.log(i.routeAll)}})},500)}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleImport}},[e._v("EXECL导入")])],1)],1)],1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"所有状态"},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"禁用",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch2,placeholder:"请输入工艺路线名称或编码","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect2},model:{value:e.dataForm.route,callback:function(t){e.$set(e.dataForm,"route",t)},expression:"dataForm.route"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("Configuration-route-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns,rowstatus:e.tableRowClassName,rowB:e.rowB,rowC:e.rowC},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"routeDialog",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"130px",size:e.size,"label-position":"right"}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataFormRules,inline:!0,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"工艺路线名称",prop:"name"}},[a("el-input",{attrs:{id:"routeName"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工艺路线编码",prop:"code"}},[a("el-input",{attrs:{id:"routeCode"},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料编码",prop:"number"}},[a("el-input",{attrs:{id:"materialCode"},model:{value:e.dataForm.number,callback:function(t){e.$set(e.dataForm,"number",t)},expression:"dataForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联物料",prop:"material"}},[a("el-autocomplete",{attrs:{"popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入内容","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.material,callback:function(t){e.$set(e.dataForm,"material",t)},expression:"dataForm.material"}})],1),e._v(" "),a("el-form",{ref:"materialForm",staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"130px",model:e.materialForm}},[a("el-form-item",{attrs:{label:"物料名称",prop:"name"}},[a("el-input",{attrs:{id:"materialName",disabled:!0},model:{value:e.materialForm.name,callback:function(t){e.$set(e.materialForm,"name",t)},expression:"materialForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格型号",prop:"type"}},[a("el-input",{attrs:{id:"materialType",disabled:!0},model:{value:e.materialForm.type,callback:function(t){e.$set(e.materialForm,"type",t)},expression:"materialForm.type"}})],1)],1),e._v(" "),a("div",{staticClass:"sub-title"},[e._v("关联工序\n          "),a("transition",{attrs:{name:"slide-fade"}},[e.show?a("span",{staticClass:"tips_procedure"},[e._v("请选择该设备生产相关的工序")]):e._e()])],1),e._v(" "),a("el-form-item",{staticClass:"procedure-form-inline",attrs:{"label-width":"0"}},[a("el-checkbox-group",{on:{change:e.handleWelfareTreatmentChange},model:{value:e.equipment.procedure,callback:function(t){e.$set(e.equipment,"procedure",t)},expression:"equipment.procedure"}},e._l(e.procedures,function(e,t){return a("el-checkbox",{key:t,attrs:{name:"fulicheckbox",label:e.label,value:e.value,"data-value":e.value}})}),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"导入",width:"50%",visible:e.dialogVisibleB,"custom-class":"dialogConfiguration",center:""},on:{"update:visible":function(t){e.dialogVisibleB=t}}},[a("el-form",{attrs:{"label-width":"110px","label-position":"right",size:e.size}},[a("el-form-item",{staticStyle:{"margin-right":"80px"}},[a("el-upload",{staticStyle:{"padding-top":"90px"},attrs:{action:e.fileUrl,"on-success":e.handleSuccess,"on-error":e.handleError,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload,"on-change":e.onChange}},[a("div",{staticClass:"el-upload__tip tip_spec",class:e.isSuccess?"success":"error",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tips))]),e._v(" "),a("el-button",{attrs:{size:"medium"}},[e._v("点击导入")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("说明：导入文件类型必须为execl格式，您可以先点击下载模板 "),a("a",{staticClass:"downloadModal",attrs:{href:e.downloadUrl}},[e._v("下载模板")])])],1)],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(e){a("TwGp")},null,null);t.default=g.exports},EbaA:function(e,t){},I5O9:function(e,t){},IB2h:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"StatisticMaintenanceTable",props:{columns:Array,customColumns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,rowE:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{groupId:"",currPage:1,pageSize:10},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.pageRequest.groupId=parseInt(localStorage.getItem("groupId")),this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)},showIconA:function(e,t,a){switch(console.log(a.property),a.property){case"Jan":if($.each(t.Jan,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Feb":if($.each(t.Feb,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Mar":if($.each(t.Mar,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Apr":if($.each(t.Apr,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"May":if($.each(t.May,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Jun":if($.each(t.Jun,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Jul":if($.each(t.Jul,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Aug":if($.each(t.Aug,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Sep":if($.each(t.Sep,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Oct":if($.each(t.Oct,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Nov":if($.each(t.Nov,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0;break;case"Dec":var i;if($.each(t.Dec,function(e,t){0==t.state&&(i=t.state)}),0==i)return!0}},showIconB:function(e,t,a){switch(a.property){case"Jan":if($.each(t.Jan,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Feb":if($.each(t.Feb,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Mar":if($.each(t.Mar,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Apr":if($.each(t.Apr,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"May":if($.each(t.May,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Jun":if($.each(t.Jun,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Jul":if($.each(t.Jul,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Aug":if($.each(t.Aug,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Sep":if($.each(t.Sep,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Oct":if($.each(t.Oct,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Nov":if($.each(t.Nov,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0;break;case"Dec":var i;if($.each(t.Dec,function(e,t){1==t.state&&(i=t.state)}),1==i)return!0}},showIconC:function(e,t,a){switch(a.property){case"Jan":if($.each(t.Jan,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Feb":if($.each(t.Feb,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Mar":if($.each(t.Mar,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Apr":if($.each(t.Apr,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"May":if($.each(t.May,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Jun":if($.each(t.Jun,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Jul":if($.each(t.Jul,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Aug":if($.each(t.Aug,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Sep":if($.each(t.Sep,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Oct":if($.each(t.Oct,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Nov":if($.each(t.Nov,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0;break;case"Dec":var i;if($.each(t.Dec,function(e,t){2==t.state&&(i=t.state)}),2==i)return!0}},showIconD:function(e,t,a){switch(a.property){case"Jan":if($.each(t.Jan,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Feb":if($.each(t.Feb,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Mar":if($.each(t.Mar,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Apr":if($.each(t.Apr,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"May":if($.each(t.May,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Jun":if($.each(t.Jun,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Jul":if($.each(t.Jul,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Aug":if($.each(t.Aug,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Sep":if($.each(t.Sep,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Oct":if($.each(t.Oct,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Nov":if($.each(t.Nov,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"Dec":var i;if($.each(t.Dec,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0}}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"maintenance",staticStyle:{width:"100%"},attrs:{data:e.data.maintenance,"highlight-current-row":e.highlightCurrentRow,border:e.border,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"},"row-style":{height:"60px"}}},[e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e._l(e.customColumns,function(t){return a("el-table-column",{key:t.prop,attrs:{"header-align":"center",align:"center",prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth,fixed:t.fixed,type:t.type},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{directives:[{name:"show",rawName:"v-show",value:e.showIconA(t.$index,t.row,t.column),expression:"showIconA(scope.$index,scope.row,scope.column)"}],staticClass:"iconfont icon-ali-success"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.showIconB(t.$index,t.row,t.column),expression:"showIconB(scope.$index,scope.row,scope.column)"}],staticClass:"iconfont icon-ali-error"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.showIconC(t.$index,t.row,t.column),expression:"showIconC(scope.$index,scope.row,scope.column)"}],staticClass:"iconfont icon-ali-stop"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.showIconD(t.$index,t.row,t.column),expression:"showIconD(scope.$index,scope.row,scope.column)"}],staticClass:"iconfont icon-ali-wrench"})]}}],null,!0)})})],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:1},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("EbaA")},"data-v-1faf8e90",null);t.default=s.exports},K4Hc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("bOdI"),d=a.n(c),u=a("NYxO"),m=a("954j"),p=a("AUIh"),h={components:{ConfigurationTable:m.default},data:function(){var e,t=this;return{size:"small",tableHeight:null,form:{date1:"",date2:""},filters:{name:""},columns:[],rowA:[],rowB:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入工序名称",trigger:"blur"}],code:[{required:!0,validator:function(e,a,i){if(!a)return i(new Error("请输入工序编码"));var o={productionProcessesCode:a};a==t.initCode?(console.log("原编码："+t.initCode),i()):$.ajax({type:"GET",url:"/xaj/configuration/sameProductionProcesses",data:o,success:function(e){1==e.status?i():i(new Error(e.msg))}})},trigger:"blur"}],department:[{required:!0,message:"请选择部门",trigger:"change"}]},dataForm:(e={id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,file:"",type:"",time:"",planProduction:""},d()(e,"name",""),d()(e,"code",""),d()(e,"department",""),e),deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(e){if(""!=t.form.date2)return e.getTime()>t.form.date2}},pickerOptions1:{disabledDate:function(e){return e.getTime()<t.form.date1}},pickerOptionsA:{disabledDate:function(e){if(""!=t.planTime.date2)return e.getTime()>t.planTime.date2}},pickerOptionsB:{disabledDate:function(e){return e.getTime()<t.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},procedure:{},department:"",departments:[{value:"塑焊车间",label:"塑焊车间"},{value:"装配车间",label:"装配车间"},{value:"金工车间",label:"金工车间"},{value:"注塑车间",label:"注塑车间"},{value:"缠绕车间",label:"缠绕车间"}],addParams:{},initCode:"",id:""}},computed:s()({},Object(u.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(t.pageRequest=e.pageRequest),t.$api.configuration.findPageProcess(t.pageRequest).then(function(e){console.log(e),e.data.data.production_processes.data.forEach(function(e,t){e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data.data.production_processes,console.log(t.pageResult)}).then(null!=e?e.callback:""),t.$api.configuration.findPageProcess(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data,console.log(t.pageResult)}).then(null!=e?e.callback:"")},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){console.log(e);var t=this,a={id:e.params[0].id};$.ajax({type:"POST",url:"/xaj/configuration/deleteProductionProcesses",data:a,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm=n()({})},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,console.log(e),this.initCode=e.row.productionProcessesCode,this.dataForm={name:e.row.productionProcessesName,code:e.row.productionProcessesCode,department:e.row.deptment},this.id=e.row.id},submitForm:function(){var e=this;e.operation?e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.addParams={productionProcessesName:e.dataForm.name,productionProcessesCode:e.dataForm.code,deptment:e.dataForm.department},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/configuration/addProductionProcesses",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),1==t.status&&e.$message({message:"新增成功",type:"success"})}}))}):e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.addParams={productionProcessesName:e.dataForm.name,productionProcessesCode:e.dataForm.code,deptment:e.dataForm.department,id:e.id},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/configuration/updateProductionProcesses",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),1==t.status&&e.$message({message:"修改成功",type:"success"})}}))})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(p.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"productionProcessesName",label:"工序名称",minWidth:200},{prop:"productionProcessesCode",label:"工序编码",minWidth:200},{prop:"deptment",label:"所属部门",minWidth:200},{prop:"updateTime",label:"新增时间",minWidth:200}],this.filterColumns=JSON.parse(o()(this.columns))},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},onChange:function(e,t){}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,i.initColumns(),console.log(i.filterColumns)}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("Configuration-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"processDialog",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"100px",size:e.size,"label-position":"right"}},[a("el-form",{ref:"dataForm",staticClass:"demo-form-inline",attrs:{model:e.dataForm,rules:e.dataFormRules,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"工序名称",prop:"name"}},[a("el-input",{attrs:{id:"processName"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工序编码",prop:"code"}},[a("el-input",{attrs:{id:"processCode"},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"所属部门",prop:"department"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.dataForm.department,callback:function(t){e.$set(e.dataForm,"department",t)},expression:"dataForm.department"}},e._l(e.departments,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(e){a("YPxP")},null,null);t.default=g.exports},LXM6:function(e,t){},MCVo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("NYxO"),d=a("yg+h"),u=a("AUIh"),m=a("mtWM"),p=a.n(m),h={components:{ConfigurationMaterialTable:d.default},data:function(){var e=this;return{size:"small",tableHeight:null,isRole:!1,form:{date1:"",date2:""},filters:{name:""},columns:[],rowA:[],rowB:[],rowC:[],text:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageParams:{},pageResult:{},operation:!1,dialogVisible:!1,dialogVisibleB:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入物料名称",trigger:"blur"}],code:[{required:!0,validator:function(t,a,i){if(!a)return i(new Error("请输入物料编码"));var o={materialCode:a};a==e.initCode?(console.log("原编码："+e.initCode),i()):$.ajax({type:"GET",url:"/xaj/configuration/sameMaterial",data:o,success:function(e){1==e.status?i():i(new Error(e.msg))}})},trigger:"blur"}],type:[{required:!0,message:"请输入规格型号",trigger:"blur"}],unit:[{required:!0,message:"请选择单位",trigger:"change"}],group:[{required:!0,message:"请选择部门",trigger:"change"}],department:[{required:!0,message:"请选择所属车间",trigger:"change"}]},dataForm:{id:0,password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,file:"",time:"",planProduction:"",material:"",name:"",code:"",type:"",unit:"",group:"",department:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},select:"",material:{},materialAll:[],materialForm:{nameCode:""},addParams:{},unitArr:[{label:"只",value:"只"},{label:"块",value:"块"},{label:"根",value:"根"},{label:"片",value:"片"}],department:[{value:"14",label:"塑焊车间"},{value:"16",label:"装配车间"},{value:"17",label:"金工车间"},{value:"18",label:"注塑车间"},{value:"20",label:"缠绕车间"}],id:"",group:"",group2:"",departments:[{value:17,label:"金工车间"},{value:18,label:"注塑车间"},{value:20,label:"缠绕车间"}],initCode:"",downloadUrl:"",fileUrl:""}},computed:s()({},Object(c.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.status=t.select,e.pageRequest.nameCode=t.dataForm.material,e.pageRequest.groupId=t.group,t.pageRequest=e.pageRequest),t.$api.configuration.findPageMaterial(t.pageRequest).then(function(e){console.log(e),e.data.data.material.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data.data.material,console.log(t.pageResult)}).then(null!=e?e.callback:""),t.$api.configuration.findPageMaterial(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;""==e.dataForm.material&&(e.materialForm.nameCode=""),e.pageParams={currPage:1,pageSize:10,status:e.select,nameCode:e.dataForm.material,groupId:e.group},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,e.$api.configuration.findPageMaterial(e.pageParams).then(function(t){console.log(t),t.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="禁用";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),e.pageResult=t.data,console.log(e.pageResult)}).then()},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){console.log(e);var t=this,a={id:e.params[0].id};$.ajax({type:"POST",url:"/xaj/configuration/deleteMaterial",data:a,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm=n()({})},handleEdit:function(e){console.log(e),this.dialogVisible=!0,this.operation=!1,this.initCode=e.row.materialCode,this.dataForm={name:e.row.materialName,code:e.row.materialCode,type:e.row.specifications,unit:e.row.type,group:e.row.productionDepartment},this.id=e.row.id},handleImport:function(){var e=p.a.defaults.baseURL;console.log(e);var t=parseInt(localStorage.getItem("groupId")),a=localStorage.getItem("name");this.dialogVisibleB=!0,this.downloadUrl=e+"/xaj/configuration/downloadMaterialTp",this.fileUrl=e+"/xaj/configuration/importMaterial?groupId="+t+"&userName="+a},handleLock:function(e){var t=this;$.ajax({type:"POST",url:"/xaj/configuration/updateMaterialStatus",data:e.params,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},submitForm:function(){var e=this;e.operation?e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.addParams={materialName:e.dataForm.name,materialCode:e.dataForm.code,specifications:e.dataForm.type,type:e.dataForm.unit,groupId:e.dataForm.group},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/configuration/addMaterial",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),1==t.status&&e.$message({message:"新增成功",type:"success"})}}))}):e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.addParams={materialName:e.dataForm.name,materialCode:e.dataForm.code,specifications:e.dataForm.type,type:e.dataForm.unit,groupId:e.dataForm.group,id:e.id},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/configuration/updateMaterial",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),1==t.status&&e.$message({message:"修改成功",type:"success"})}}))})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(u.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"productionDepartment",label:"部门",minWidth:120},{prop:"materialName",label:"物料名称",minWidth:200},{prop:"materialCode",label:"物料编码",minWidth:150},{prop:"specifications",label:"规格型号",minWidth:150},{prop:"type",label:"基本单位",minWidth:120},{prop:"updateTime",label:"新增时间",minWidth:150},{prop:"status",label:"状态",minWidth:100}],this.filterColumns=JSON.parse(o()(this.columns))},handleSuccess:function(e,t,a){var i=this;console.log(e),setTimeout(function(){i.dialogVisibleB=!1,i.findPage(null),i.$message({message:"导入成功",type:"success"})},500)},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},beforeUpload:function(e){console.log(e);var t=e.name;this.dataForm.file=t,$("#myFile").val(t);var a=t.split(".");if(console.log(a[a.length-1].toLowerCase()),"xls"==a[a.length-1].toLowerCase()||"xlsx"==a[a.length-1].toLowerCase())return this.tips="导入成功",this.isSuccess=!0,!0;this.tips="文件类型错误",this.isSuccess=!1},onChange:function(e,t){},querySearch:function(e,t){var a=this.materialAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},loadAll:function(){},handleSelect:function(e){console.log(e),this.materialForm={nameCode:e.value},console.log(this.materialForm)},tableRowClassName:function(e){var t=e.row,a=e.rowIndex,i=$(".el-table .el-table__body-wrapper tbody tr:eq(0) td").length-1;"正常"==t.status?($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#3F51B5"}),this.rowA.indexOf(a)<0&&this.rowA.push(a),this.rowB.indexOf(a)<0&&this.rowB.push(a),this.rowC.indexOf(a)<0&&this.rowC.push(a),this.text.indexOf(a)<0&&this.text.push(a)):"禁用"==t.status&&($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#E51C23"}),this.rowA.indexOf(a)<0&&this.rowA.push(a),this.text.indexOf(a)>-1&&this.text.splice(this.text.indexOf(a),1),this.rowB.indexOf(a)>-1&&this.rowB.splice(this.rowB.indexOf(a),1),this.rowC.indexOf(a)>-1&&this.rowC.splice(this.rowC.indexOf(a),1))}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,i.initColumns(),console.log(i.filterColumns),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/configuration/searchAllMaterial",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].materialName&&(o=!1)}),o&&a.push({value:t[e].materialName})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].materialCode&&(i=!1)}),i&&o.push({value:t[e].materialCode})}),i.materialAll=a.concat(o),console.log(i.materialAll)}})},500)}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleImport}},[e._v("EXECL导入")])],1)],1)],1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"150px"},attrs:{label:""}},[a("el-select",{attrs:{size:"medium",placeholder:"请选择部门"},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.departments,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"所有状态"},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"禁用",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入物料名称或编码","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.material,callback:function(t){e.$set(e.dataForm,"material",t)},expression:"dataForm.material"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("Configuration-material-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns,rowstatus:e.tableRowClassName,rowA:e.rowA,rowB:e.rowB,rowC:e.rowC,text:e.text},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete,"handle-lock":e.handleLock}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"materialDialog",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"100px",size:e.size,"label-position":"right"}},[a("el-form",{ref:"dataForm",staticClass:"demo-form-inline",attrs:{model:e.dataForm,rules:e.dataFormRules,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"物料名称",prop:"name"}},[a("el-input",{attrs:{id:"materialName"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料编码",prop:"code"}},[a("el-input",{attrs:{id:"materialCode"},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格型号",prop:"type"}},[a("el-input",{attrs:{id:"materialType"},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"基本单位",prop:"unit"}},[a("el-select",{attrs:{placeholder:"请选择单位"},model:{value:e.dataForm.unit,callback:function(t){e.$set(e.dataForm,"unit",t)},expression:"dataForm.unit"}},e._l(e.unitArr,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"所属部门",prop:"group"}},[a("el-select",{attrs:{size:"medium",placeholder:"请选择部门"},model:{value:e.dataForm.group,callback:function(t){e.$set(e.dataForm,"group",t)},expression:"dataForm.group"}},e._l(e.departments,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"导入",width:"50%",visible:e.dialogVisibleB,"custom-class":"dialogConfiguration",center:""},on:{"update:visible":function(t){e.dialogVisibleB=t}}},[a("el-form",{attrs:{"label-width":"110px","label-position":"right",size:e.size}},[a("el-form-item",{staticStyle:{"margin-right":"80px"}},[a("el-upload",{staticStyle:{"padding-top":"90px"},attrs:{action:e.fileUrl,"on-success":e.handleSuccess,"on-error":e.handleError,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload,"on-change":e.onChange}},[a("div",{staticClass:"el-upload__tip tip_spec",class:e.isSuccess?"success":"error",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tips))]),e._v(" "),a("el-button",{attrs:{size:"medium"}},[e._v("点击导入")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("说明：导入文件类型必须为execl格式，您可以先点击下载模板 "),a("a",{staticClass:"downloadModal",attrs:{href:e.downloadUrl}},[e._v("下载模板")])])],1)],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(e){a("jI6r")},null,null);t.default=g.exports},NGlO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{src:"",loading:null}},methods:{resetSrc:function(e){this.src=e,this.load()},load:function(){this.loading=this.$loading({lock:!0,text:"loading...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)",target:document.querySelector("#main-container ")})},onloaded:function(){this.loading&&this.loading.close()}},mounted:function(){this.resetSrc(this.$store.state.iframe.iframeUrl)},watch:{$route:{handler:function(e,t){this.resetSrc(this.$store.state.iframe.iframeUrl)}}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"iframe-container"},[t("iframe",{staticClass:"frame",attrs:{src:this.src,scrolling:"auto",frameborder:"0",onload:this.onloaded()}})])},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(e){a("zU9v")},null,null);t.default=r.exports},O3aa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"MaintenanceRepairTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,startTime:"",endTime:"",status:"",nameCode:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleComplete:function(e,t){var a=[e,t];this.$emit("complete",a)},handleDelete:function(e,t){this.delete(t.id)},handleCheck:function(e,t){this.$emit("handleCheck",{index:e,row:t})},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){t.$message({message:"删除成功",type:"success"}),t.findPage(),t.loading=!1}})}).catch(function(){})},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonC:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonD:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.rowC,this.rowD)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"row-class-name":e.rowstatus,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"250","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showButtonA(t.$index,e.rowA)?a("el-button",{style:{color:"#fff","border-color":e.themeColor,"background-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleComplete(t.$index,t.row)}}},[e._v("完成")]):e._e(),e._v(" "),e.showButtonB(t.$index,e.rowB)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]):e._e(),e._v(" "),e.showButtonC(t.$index,e.rowC)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),e.showButtonD(t.$index,e.rowD)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleCheck(t.$index,t.row)}}},[e._v("查看")]):e._e()]}}],null,!1,177512150)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("mk2o")},"data-v-7f0da711",null);t.default=s.exports},OVXC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"StatisticMaintainChart",props:{columns:Array,customColumns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,rowE:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{year:"",machineType:"",nameNumber:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)},showIconD:function(e,t,a){switch(a.property){case"january":if($.each(t.january,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"february":if($.each(t.february,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"march":if($.each(t.march,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"april":if($.each(t.april,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"may":if($.each(t.may,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"june":if($.each(t.june,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"july":if($.each(t.july,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"august":if($.each(t.august,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"september":if($.each(t.september,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"october":if($.each(t.october,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"november":if($.each(t.november,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0;break;case"december":var i;if($.each(t.december,function(e,t){3==t.state&&(i=t.state)}),3==i)return!0}},showIconNum:function(e,t,a){switch(a.property){case"january":if($.each(t.january,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"february":if($.each(t.february,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"march":if($.each(t.march,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"april":if($.each(t.april,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"may":if($.each(t.may,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"june":if($.each(t.june,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"july":if($.each(t.july,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"august":if($.each(t.august,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"september":if($.each(t.september,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"october":if($.each(t.october,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"november":if($.each(t.november,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o;break;case"december":var i,o;if($.each(t.december,function(e,t){3==t.state&&(i=t.state,o=t.num)}),3==i)return o}}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"maintenance",staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"},"row-style":{height:"60px"}}},[e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e._l(e.customColumns,function(t){return a("el-table-column",{key:t.prop,attrs:{"header-align":"center",align:"center",prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth,fixed:t.fixed,type:t.type},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{directives:[{name:"show",rawName:"v-show",value:e.showIconD(t.$index,t.row,t.column),expression:"showIconD(scope.$index,scope.row,scope.column)"}],staticClass:"iconfont icon-ali-wrench"}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showIconNum(t.$index,t.row,t.column)>1,expression:"showIconNum(scope.$index,scope.row,scope.column)>1"}],staticClass:"number"},[a("i",{staticClass:"iconfont icon-ali-remove"}),a("span",{domProps:{innerHTML:e._s(e.showIconNum(t.$index,t.row,t.column))}})])]}}],null,!0)})})],2)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("ukkT")},"data-v-0c72cb84",null);t.default=s.exports},PuP0:function(e,t){},Q5G0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("Dd8w"),n=a.n(r),l=a("NYxO"),s=a("IB2h"),c=a("1T77"),d=a("i0Tw"),u=a("OVXC"),m=a("/0Sh"),p=(a("AUIh"),{components:{StatisticMaintenanceTable:s.default,StatisticMaintainChart:c.default,StatisticMaintainTable:d.default,StatisticRepairChart:u.default,StatisticRepairTable:m.default},data:function(){var e=this;return{inputs:[{}],size:"small",tableHeight:null,form:{date1:"",date2:""},year:"",machine:"",maintenance:"",filters:{name:""},columns:[],columnsA:[],columnsB:[],columnsCopy:[],custom_columns:[],rowA:[],rowB:[],rowC:[],rowD:[],rowE:[],filterColumns:[],filterColumnsA:[],filterColumnsB:[],filterColumnsCopy:[],filterCustomColumns:[],pageRequest:{},pageParams:{},chartResultB:{},pageResultB:{},operation:!0,dialogVisible:!1,action:!0,dialogVisibleB:!1,editLoading:!1,editLoadingB:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],decNum:[{required:!0,message:"请输入数量",trigger:"blur"}]},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,decNum:"",device:""},refForm:{dev_value:"",per_value:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",working:{},planTime:{date1:"",date2:""},machineType:[],isTableAll:!0,isTableA:!1,isTableB:!1,isMaintainChart:!0,isRepairChart:!0,radio1:"图形",radio2:"图形",deviceForm:{nameNumber:""}}},computed:n()({},Object(l.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPageB:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.year=t.year,e.pageRequest.machineType=t.machine,e.pageRequest.nameNumber=t.dataForm.device,t.pageRequest=e.pageRequest),t.$api.statistic.findPageBMaintenance(t.pageRequest).then(function(e){console.log(e),e.data.data.maintenance_b_list.data.forEach(function(e,t){switch(e.status){case 0:e.status="待检修";break;case 1:e.status="已完成"}}),t.pageResultB=e.data.data.maintenance_b_list,console.log(t.pageResultB)}).then(null!=e?e.callback:""),t.$api.statistic.findPageBMaintenance(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="待检修";break;case 1:e.status="已完成"}}),t.pageResultB=e.data,console.log(t.pageResultB)}).then(null!=e?e.callback:"")},findChartB:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.year=t.year,e.pageRequest.machineType=t.machine,e.pageRequest.nameNumber=t.dataForm.device,t.pageRequest=e.pageRequest),t.$api.statistic.findChartBMaintenance(t.pageRequest).then(function(e){console.log(e),e.data.data.maintenance_b_chart.data.forEach(function(e,t){null!=e.january&&(e.january=[{state:3,num:e.january}]),null!=e.february&&(e.february=[{state:3,num:e.february}]),null!=e.march&&(e.march=[{state:3,num:e.march}]),null!=e.april&&(e.april=[{state:3,num:e.april}]),null!=e.may&&(e.may=[{state:3,num:e.may}]),null!=e.june&&(e.june=[{state:3,num:e.june}]),null!=e.july&&(e.july=[{state:3,num:e.july}]),null!=e.august&&(e.august=[{state:3,num:e.august}]),null!=e.september&&(e.september=[{state:3,num:e.september}]),null!=e.october&&(e.october=[{state:3,num:e.october}]),null!=e.november&&(e.november=[{state:3,num:e.november}]),null!=e.december&&(e.december=[{state:3,num:e.december}])}),t.chartResultB=e.data.data.maintenance_b_chart,console.log(t.chartResultB)}).then(null!=e?e.callback:""),t.$api.statistic.findChartBMaintenance(t.pageRequest).then(function(e){console.log(e),e.data.forEach(function(e,t){null!=e.january&&(e.january=[{state:3,num:e.january}]),null!=e.february&&(e.february=[{state:3,num:e.february}]),null!=e.march&&(e.march=[{state:3,num:e.march}]),null!=e.april&&(e.april=[{state:3,num:e.april}]),null!=e.may&&(e.may=[{state:3,num:e.may}]),null!=e.june&&(e.june=[{state:3,num:e.june}]),null!=e.july&&(e.july=[{state:3,num:e.july}]),null!=e.august&&(e.august=[{state:3,num:e.august}]),null!=e.september&&(e.september=[{state:3,num:e.september}]),null!=e.october&&(e.october=[{state:3,num:e.october}]),null!=e.november&&(e.november=[{state:3,num:e.november}]),null!=e.december&&(e.december=[{state:3,num:e.december}])}),t.chartResultB=e,console.log(t.chartResultB)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;null==e.year&&(e.year=[]),""==e.dataForm.device&&(e.deviceForm.nameNumber=""),e.isRepairChart?(e.pageParams={year:e.year,machineType:e.machine,nameCode:e.dataForm.device},e.$api.statistic.findChartBMaintenance(e.pageParams).then(function(t){console.log(t),t.data.forEach(function(e,t){null!=e.january&&(e.january=[{state:3,num:e.january}]),null!=e.february&&(e.february=[{state:3,num:e.february}]),null!=e.march&&(e.march=[{state:3,num:e.march}]),null!=e.april&&(e.april=[{state:3,num:e.april}]),null!=e.may&&(e.may=[{state:3,num:e.may}]),null!=e.june&&(e.june=[{state:3,num:e.june}]),null!=e.july&&(e.july=[{state:3,num:e.july}]),null!=e.august&&(e.august=[{state:3,num:e.august}]),null!=e.september&&(e.september=[{state:3,num:e.september}]),null!=e.october&&(e.october=[{state:3,num:e.october}]),null!=e.november&&(e.november=[{state:3,num:e.november}]),null!=e.december&&(e.december=[{state:3,num:e.december}])}),e.chartResultB=t,console.log(e.chartResultB)}).then()):(e.pageParams={currPage:1,pageSize:10,year:e.year,machineType:e.machine,nameCode:e.dataForm.device},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,e.$api.statistic.findPageBMaintenance(e.pageParams).then(function(t){console.log(t),t.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="待检修";break;case 1:e.status="已完成"}}),e.pageResultB=t.data,console.log(e.pageResultB)}).then())},submitForm:function(){var e=this;e.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0,e.operation?$.ajax({type:"GET",url:"/xaj/production/splitOrder",data:e.paramsSplit,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.inputs=[{}]}}):$.ajax({type:"POST",url:"/xaj/production/sendOrder",data:e.paramsSend,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.refForm.resetFields()}})})})},initColumnsB:function(){this.columnsB=[{prop:"machineNumber",label:"设备编号",minWidth:100},{prop:"machine",label:"设备名称",minWidth:100},{prop:"modelNumber",label:"设备型号",minWidth:100},{prop:"reason",label:"故障原因",minWidth:100},{prop:"breakDate",label:"故障时间",minWidth:110},{prop:"completeDate",label:"完成时间",minWidth:110},{prop:"repairPerson",label:"维修人",minWidth:90},{prop:"checkPerson",label:"验收人",minWidth:90},{prop:"status",label:"维修状态",minWidth:100}],this.filterColumnsB=JSON.parse(o()(this.columnsB))},initCustomColumns:function(){this.custom_columns=[{prop:"january",label:"1月",minWidth:110},{prop:"february",label:"2月",minWidth:110},{prop:"march",label:"3月",minWidth:110},{prop:"april",label:"4月",minWidth:110},{prop:"may",label:"5月",minWidth:110},{prop:"june",label:"6月",minWidth:110},{prop:"july",label:"7月",minWidth:110},{prop:"august",label:"8月",minWidth:110},{prop:"september",label:"9月",minWidth:110},{prop:"october",label:"10月",minWidth:110},{prop:"november",label:"11月",minWidth:110},{prop:"december",label:"12月",minWidth:110}],this.filterCustomColumns=JSON.parse(o()(this.custom_columns))},initColumnsCopy:function(){this.columnsCopy=[{prop:"machine",label:"设备名称",minWidth:90},{prop:"machineNumber",label:"设备编号",minWidth:90}],this.filterColumnsCopy=JSON.parse(o()(this.columnsCopy))},querySearch:function(e,t){var a=this.deviceAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},handleSelect:function(e){console.log(e),this.deviceForm={nameNumber:e.value},console.log(this.deviceForm)},tableRowClassNameB:function(e){var t=e.row,a=e.rowIndex,i=$(".repair .el-table__body-wrapper tbody tr:eq(0) td").length-1;"待检修"==t.status?$(".repair .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+i+")").css({color:"#FF9800"}):"已完成"==t.status&&$(".repair .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+i+")").css({color:"#3F51B5"})},handleMaintenance:function(e){console.log(e),1==e?(this.isTableAll=!1,this.isTableA=!0,this.isTableB=!1):2==e&&(this.isTableAll=!1,this.isTableA=!1,this.isTableB=!0)},chooseRadioA:function(e){this.isMaintainChart="图形"==e},chooseRadioB:function(e){this.isRepairChart="图形"==e}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-270,i.initColumnsB(),i.initCustomColumns(),i.initColumnsCopy(),console.log(i.filterColumns,i.filterCustomColumns),console.log(localStorage.getItem("groupId"),localStorage.getItem("icCardNum")),$.ajax({type:"GET",url:"/xaj/maintenance/findAllMachineType",success:function(e){$.each(e,function(e,t){i.machineType.push({value:t})})}}),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/configuration/searchAllMachine",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].machineName&&(o=!1)}),o&&a.push({value:t[e].machineName})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].machineNumber&&(i=!1)}),i&&o.push({value:t[e].machineNumber})}),i.deviceAll=a.concat(o),console.log(i.deviceAll)}})},500)}}),h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{margin:"0 auto","padding-top":"10px","padding-right":"15px",float:"initial"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"120px"}},[a("el-date-picker",{attrs:{type:"year",placeholder:"选择年份",size:"medium","value-format":"yyyy"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"设备类型"},model:{value:e.machine,callback:function(t){e.machine=t},expression:"machine"}},e._l(e.machineType,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入设备名称或设备编号","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.device,callback:function(t){e.$set(e.dataForm,"device",t)},expression:"dataForm.device"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"section-three"},[a("div",{staticClass:"titlebar"},[e._m(0),e._v(" "),a("span",[e._v("设备年度维修情况")]),e._v(" "),a("el-radio-group",{attrs:{size:"mini"},on:{change:e.chooseRadioB},model:{value:e.radio2,callback:function(t){e.radio2=t},expression:"radio2"}},[a("el-radio-button",{attrs:{label:"图形"}}),e._v(" "),a("el-radio-button",{attrs:{label:"表格"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRepairChart,expression:"isRepairChart"}]},[a("Statistic-repair-chart",{attrs:{height:e.tableHeight,data:e.chartResultB,columns:e.filterColumnsCopy,customColumns:e.filterCustomColumns},on:{findPage:e.findChartB}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isRepairChart,expression:"!isRepairChart"}]},[a("Statistic-repair-table",{attrs:{height:e.tableHeight,data:e.pageResultB,columns:e.filterColumnsB,rowstatus:e.tableRowClassNameB},on:{findPage:e.findPageB}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("i",{staticClass:"iconfont icon-ali-wrench"}),this._v("维修")])])}]};var f=a("VU/8")(p,h,!1,function(e){a("SY12")},null,null);t.default=f.exports},R197:function(e,t){},RP5A:function(e,t){},SY12:function(e,t){},SYLk:function(e,t){},"T/Pj":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"StatisticTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,rowE:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,period:"",nameMobile:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})})],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("VhgH")},"data-v-32660ff0",null);t.default=s.exports},TwGp:function(e,t){},TwYs:function(e,t){},UBhS:function(e,t){},V9B5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("NYxO"),d=a("O3aa"),u=a("AUIh"),m={components:{MaintenanceRepairTable:d.default},data:function(){var e=this;return{size:"small",tableHeight:null,device:"",status:"",radio:1,dateArr:[],form:{date1:"",date2:""},filters:{name:""},columns:[],rowA:[],rowB:[],rowC:[],rowD:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageParams:{currPage:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dialogVisibleA:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],device:[{required:!0,message:"请输入设备名称或设备编号",trigger:"blur"}],time:[{required:!0,message:"请选择故障时间",trigger:"blur"}]},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,file:"",device:"",device2:"",time:"",planProduction:"",failureCause:"",solution:"",repair:"",acceptor:""},refForm:{device:"",name:"",type:"",number:"",category:"",time:"",failureCause:"",solution:"",repair:"",acceptor:"",radio:""},refFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}]},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},equipmentAll:[],equipmentForm:{name:"",type:"",number:"",category:""},equipmentForm2:{nameCode:""},equipment:{},addParams:{},completeParams:{},id:""}},computed:s()({},Object(c.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){var t=this;null!==e&&(e.pageRequest.status=t.status,e.pageRequest.nameCode=t.dataForm.device2,e.pageRequest.startTime=t.dateArr[0],e.pageRequest.endTime=t.dateArr[1],t.pageRequest=e.pageRequest),t.$api.maintenance.findRepairPage(t.pageRequest).then(function(e){e.data.data.repair.data.forEach(function(e,t){switch(e.status){case 0:e.status="待检修";break;case 1:e.status="已完成"}}),t.pageResult=e.data.data.repair,console.log(t.pageResult)}).then(null!=e?e.callback:""),$.get("/xaj/maintenance/searchRepairRecordList",t.pageRequest).then(function(e){e.data.forEach(function(e,t){switch(e.status){case 0:e.status="待检修";break;case 1:e.status="已完成"}}),t.pageResult=e,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;null==e.dateArr&&(e.dateArr=[]),""==e.dataForm.device2&&(e.equipmentForm2.nameCode=""),e.pageParams={currPage:1,pageSize:10,startTime:e.dateArr[0],endTime:e.dateArr[1],status:e.status,nameCode:e.dataForm.device2},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,$.get("/xaj/maintenance/searchRepairRecordList",e.pageParams).then(function(t){t.data.forEach(function(e,t){switch(e.status){case 0:e.status="待检修";break;case 1:e.status="已完成"}}),e.pageResult=t,console.log(e.pageResult)}).then()},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){console.log(e);var t=this,a={id:e.params[0].id};$.ajax({type:"POST",url:"/xaj/maintenance/deleteRepairRecord",data:a,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm=n()({}),this.equipmentForm=n()({})},handleEdit:function(e){switch(this.dialogVisible=!0,this.operation=!1,console.log(e),this.dataForm={time:e.row.breakDate,failureCause:e.row.reason,solution:e.row.method,repair:e.row.repairPerson,acceptor:e.row.checkPerson,device:e.row.machine+e.row.machineNumber},this.equipmentForm={number:e.row.machineNumber,name:e.row.machine,type:e.row.machineType,category:e.row.modelNumber},e.row.status){case"已完成":this.radio=1;break;case"待检修":this.radio=0}console.log(this.radio),this.id=e.row.id},handleCheck:function(e){console.log(e);this.refForm.device=e.row.machine,this.refForm.name=e.row.machine,this.refForm.type=e.row.machineType,this.refForm.number=e.row.machineNumber,this.refForm.category=e.row.modelNumber,this.refForm.time=e.row.breakDate,this.refForm.failureCause=e.row.reason,this.refForm.solution=e.row.method,this.refForm.repair=e.row.repairPerson,this.refForm.acceptor=e.row.checkPerson,this.refForm.radio=e.row.status,this.dialogVisibleA=!0},submitForm:function(){var e=this;e.operation?e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.addParams={machineNumber:e.equipmentForm.number,machine:e.equipmentForm.name,machineType:e.equipmentForm.type,modelNumber:e.equipmentForm.category,breakDate:e.dataForm.time,reason:e.dataForm.failureCause,method:e.dataForm.solution,repairPerson:e.dataForm.repair,checkPerson:e.dataForm.acceptor,status:e.radio},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/maintenance/addRepairRecord",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.$refs.equipmentForm.resetFields(),e.radio=1,1==t.status&&e.$message({message:"新增成功",type:"success"})}}))}):e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.dataForm.time=new Date(e.dataForm.time),e.addParams={machineNumber:e.equipmentForm.number,machine:e.equipmentForm.name,machineType:e.equipmentForm.type,modelNumber:e.equipmentForm.category,breakDate:e.dataForm.time,reason:e.dataForm.failureCause,method:e.dataForm.solution,repairPerson:e.dataForm.repair,checkPerson:e.dataForm.acceptor,status:e.radio,id:e.id},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/maintenance/updateRepairRecord",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.$refs.equipmentForm.resetFields(),e.radio=1,1==t.status&&e.$message({message:"修改成功",type:"success"})}}))})},complete:function(e){var t,a=this;switch(console.log(e),e[1].status){case"待检修":t=0;break;case"已完成":t=1}a.completeParams={id:e[1].id,status:t},console.log(a.completeParams),$.ajax({type:"GET",url:"/xaj/maintenance/updateRepairRecordStatus",data:a.completeParams,success:function(e){console.log(e),a.findPage(null)}})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(u.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"machineNumber",label:"设备编号",minWidth:80},{prop:"machine",label:"设备名称",minWidth:120},{prop:"modelNumber",label:"设备型号",minWidth:120},{prop:"reason",label:"故障原因",minWidth:120},{prop:"breakDate",label:"故障时间",minWidth:150},{prop:"completeDate",label:"完成时间",minWidth:150},{prop:"repairPerson",label:"维修人",minWidth:80},{prop:"checkPerson",label:"验收人",minWidth:80},{prop:"status",label:"维修状态",minWidth:80}],this.filterColumns=JSON.parse(o()(this.columns))},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},onChange:function(e,t){},tableRowClassName:function(e){var t=e.row,a=e.rowIndex,i=$(".el-table .el-table__body-wrapper tbody tr:eq(0) td").length-1;"待检修"==t.status?($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#FF9800"}),this.rowA.indexOf(a)<0&&this.rowA.push(a),this.rowB.indexOf(a)<0&&this.rowB.push(a),this.rowC.indexOf(a)<0&&this.rowC.push(a),this.rowD.indexOf(a)>-1&&this.rowD.splice(this.rowD.indexOf(a),1)):"已完成"==t.status&&($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#3F51B5"}),this.rowB.indexOf(a)<0&&this.rowB.push(a),this.rowD.indexOf(a)<0&&this.rowD.push(a),this.rowA.indexOf(a)>-1&&this.rowA.splice(this.rowB.indexOf(a),1),this.rowC.indexOf(a)>-1&&this.rowC.splice(this.rowC.indexOf(a),1))},querySearch:function(e,t){var a=this.equipmentAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},loadAll:function(){},handleSelect:function(e){console.log(e),this.equipmentForm={name:e.name,type:e.type,number:e.number,category:e.category}},handleSelect2:function(e){console.log(e),this.equipmentForm2={nameCode:e.value}}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,i.initColumns(),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/configuration/searchAllMachine",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].machine&&(o=!1)}),o&&a.push({value:t[e].machine,name:t[e].machineName,type:t[e].machineType,number:t[e].machineNumber,category:t[e].modelNumber})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].machineNumber&&(i=!1)}),i&&o.push({value:t[e].machineNumber,name:t[e].machineName,type:t[e].machineType,number:t[e].machineNumber,category:t[e].modelNumber})}),i.equipmentAll=a.concat(o),console.log(i.equipmentAll)}})},1e3)}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"300px"}},[a("el-date-picker",{attrs:{size:"medium",type:"daterange","range-separator":"—","start-placeholder":"起始时间","end-placeholder":"结束时间"},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"110px"}},[a("el-select",{attrs:{size:"medium",placeholder:"维修状态"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("el-option",{attrs:{label:"待检修",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"已完成",value:"1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入设备名称或设备编号","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect2},model:{value:e.dataForm.device2,callback:function(t){e.$set(e.dataForm,"device2",t)},expression:"dataForm.device2"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("Maintenance-repair-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns,rowstatus:e.tableRowClassName,rowA:e.rowA,rowB:e.rowB,rowC:e.rowC,rowD:e.rowD},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete,handleCheck:e.handleCheck,complete:e.complete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"dialogRepair",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"100px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[a("el-form-item",{attrs:{label:"故障设备",prop:"device"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.device,callback:function(t){e.$set(e.dataForm,"device",t)},expression:"dataForm.device"}})],1),e._v(" "),a("el-form",{ref:"equipmentForm",staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"100px",model:e.equipmentForm}},[a("el-form-item",{attrs:{label:"设备名称",prop:"name"}},[a("el-input",{attrs:{id:"equipmentName",disabled:!0},model:{value:e.equipmentForm.name,callback:function(t){e.$set(e.equipmentForm,"name",t)},expression:"equipmentForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型",prop:"type"}},[a("el-input",{attrs:{id:"equipmentType",disabled:!0},model:{value:e.equipmentForm.type,callback:function(t){e.$set(e.equipmentForm,"type",t)},expression:"equipmentForm.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",prop:"number"}},[a("el-input",{attrs:{id:"equipmentNumber",disabled:!0},model:{value:e.equipmentForm.number,callback:function(t){e.$set(e.equipmentForm,"number",t)},expression:"equipmentForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备型号",prop:"category"}},[a("el-input",{attrs:{id:"equipmentCategory",disabled:!0},model:{value:e.equipmentForm.category,callback:function(t){e.$set(e.equipmentForm,"category",t)},expression:"equipmentForm.category"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthA",attrs:{label:"故障时间",prop:"time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择保养时间","prefix-icon":"iconfont icon-ali-calendar-range",clearable:!1},model:{value:e.dataForm.time,callback:function(t){e.$set(e.dataForm,"time",t)},expression:"dataForm.time"}})],1),e._v(" "),a("div",{staticClass:"sub-title"},[e._v("故障原因")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"failureCause"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请填写具体故障的原因！",resize:"none"},model:{value:e.dataForm.failureCause,callback:function(t){e.$set(e.dataForm,"failureCause",t)},expression:"dataForm.failureCause"}})],1),e._v(" "),a("div",{staticClass:"sub-title"},[e._v("解决办法")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"solution"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请填写具体故障的解决办法！",resize:"none"},model:{value:e.dataForm.solution,callback:function(t){e.$set(e.dataForm,"solution",t)},expression:"dataForm.solution"}})],1),e._v(" "),a("el-form",{attrs:{inline:!0,"label-width":"100px"}},[a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"维修人",prop:"repair"}},[a("el-input",{attrs:{placeholder:"请填写维修人"},model:{value:e.dataForm.repair,callback:function(t){e.$set(e.dataForm,"repair",t)},expression:"dataForm.repair"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"验收人",prop:"acceptor"}},[a("el-input",{attrs:{placeholder:"请填写验收人"},model:{value:e.dataForm.acceptor,callback:function(t){e.$set(e.dataForm,"acceptor",t)},expression:"dataForm.acceptor"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"当前状态"}},[a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:1}},[e._v("已完成")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("待检修")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看",width:"50%",visible:e.dialogVisibleA,"custom-class":"dialogRepair",center:""},on:{"update:visible":function(t){e.dialogVisibleA=t}}},[a("el-form",{ref:"refForm",attrs:{model:e.refForm,"label-width":"100px",rules:e.refFormRules,size:e.size,"label-position":"right"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备名称",prop:"name"}},[a("el-input",{attrs:{id:"equipmentName",disabled:!0},model:{value:e.refForm.name,callback:function(t){e.$set(e.refForm,"name",t)},expression:"refForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型",prop:"type"}},[a("el-input",{attrs:{id:"equipmentType",disabled:!0},model:{value:e.refForm.type,callback:function(t){e.$set(e.refForm,"type",t)},expression:"refForm.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",prop:"number"}},[a("el-input",{attrs:{id:"equipmentNumber",disabled:!0},model:{value:e.refForm.number,callback:function(t){e.$set(e.refForm,"number",t)},expression:"refForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备型号",prop:"category"}},[a("el-input",{attrs:{id:"equipmentCategory",disabled:!0},model:{value:e.refForm.category,callback:function(t){e.$set(e.refForm,"category",t)},expression:"refForm.category"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthA",attrs:{label:"故障时间",prop:"time"}},[a("el-input",{model:{value:e.refForm.time,callback:function(t){e.$set(e.refForm,"time",t)},expression:"refForm.time"}})],1),e._v(" "),a("div",{staticClass:"sub-title"},[e._v("故障原因")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"failureCause"}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none"},model:{value:e.refForm.failureCause,callback:function(t){e.$set(e.refForm,"failureCause",t)},expression:"refForm.failureCause"}})],1),e._v(" "),a("div",{staticClass:"sub-title"},[e._v("解决办法")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"solution"}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none"},model:{value:e.refForm.solution,callback:function(t){e.$set(e.refForm,"solution",t)},expression:"refForm.solution"}})],1),e._v(" "),a("el-form",{attrs:{inline:!0,"label-width":"100px"}},[a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"维修人",prop:"repair"}},[a("el-input",{model:{value:e.refForm.repair,callback:function(t){e.$set(e.refForm,"repair",t)},expression:"refForm.repair"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"验收人",prop:"acceptor"}},[a("el-input",{model:{value:e.refForm.acceptor,callback:function(t){e.$set(e.refForm,"acceptor",t)},expression:"refForm.acceptor"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"当前状态"}},[e._v("\n      "+e._s(e.refForm.radio)+"\n    ")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,p,!1,function(e){a("2ImO")},null,null);t.default=h.exports},VhgH:function(e,t){},YPxP:function(e,t){},ZOWQ:function(e,t){},ak8d:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"StatisticEquipmentTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,rowE:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{groupId:"",currPage:1,pageSize:10,period:"",nameCode:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})})],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("zR0r")},"data-v-61155b8c",null);t.default=s.exports},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var i,o=a("C4MV"),r=(i=o)&&i.__esModule?i:{default:i};t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},c0YS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"ConfigurationRouteTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowB:Array,rowC:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,groupId:"",status:"",nameCode:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.pageRequest.groupId=parseInt(localStorage.getItem("groupId")),this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},handleLock:function(e,t){var a=this,i=0==t.isLock?"禁用":"启用";this.$confirm("您确定"+i+"该内容吗？","确认").then(function(){var e={id:t.id,status:t.isLock};a.loading=!0;a.$emit("handle-lock",{params:e,callback:function(e){a.findPage(),a.loading=!1}})}).catch(function(){})},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){t.$message({message:"删除成功",type:"success"}),t.findPage(),t.loading=!1}})}).catch(function(){})},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonC:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showText:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"row-class-name":e.rowstatus,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"150","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showButtonB(t.$index,e.rowB)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]):e._e(),e._v(" "),e.showButtonC(t.$index,e.rowC)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}],null,!1,1753267238)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("TwYs")},"data-v-0ff810b0",null);t.default=s.exports},"d+nR":function(e,t){},fOrC:function(e,t){},fUEP:function(e,t){},g9CB:function(e,t,a){var i={"./Board":"L1Bj","./Board/":"L1Bj","./Board/Equipment":"Iofl","./Board/Equipment.vue":"Iofl","./Board/EquipmentCopy":"0BSN","./Board/EquipmentCopy.vue":"0BSN","./Board/Header":"CT1a","./Board/Header.vue":"CT1a","./Board/Production":"CrXr","./Board/Production.vue":"CrXr","./Board/index":"L1Bj","./Board/index.vue":"L1Bj","./Configuration/Device":"zlEG","./Configuration/Device.vue":"zlEG","./Configuration/Index":"K4Hc","./Configuration/Index.vue":"K4Hc","./Configuration/Material":"MCVo","./Configuration/Material.vue":"MCVo","./Configuration/Route":"E+mM","./Configuration/Route.vue":"E+mM","./Core/ConfigurationDeviceTable":"9GPq","./Core/ConfigurationDeviceTable.vue":"9GPq","./Core/ConfigurationMaterialTable":"yg+h","./Core/ConfigurationMaterialTable.vue":"yg+h","./Core/ConfigurationRouteTable":"c0YS","./Core/ConfigurationRouteTable.vue":"c0YS","./Core/ConfigurationTable":"954j","./Core/ConfigurationTable.vue":"954j","./Core/KtButton":"wbNz","./Core/KtButton.vue":"wbNz","./Core/MaintenanceRecordTable":"72lX","./Core/MaintenanceRecordTable.vue":"72lX","./Core/MaintenanceRepairTable":"O3aa","./Core/MaintenanceRepairTable.vue":"O3aa","./Core/MaintenanceTable":"xmQO","./Core/MaintenanceTable.vue":"xmQO","./Core/MessagePanel":"VaSu","./Core/MessagePanel.vue":"VaSu","./Core/NoticePanel":"6XgB","./Core/NoticePanel.vue":"6XgB","./Core/PersonalPanel":"vlPt","./Core/PersonalPanel.vue":"vlPt","./Core/ProcessParameterTable":"oor5","./Core/ProcessParameterTable.vue":"oor5","./Core/ProcessTable":"m9+0","./Core/ProcessTable.vue":"m9+0","./Core/ProductionTable":"VQ+G","./Core/ProductionTable.vue":"VQ+G","./Core/StatisticEquipmentTable":"ak8d","./Core/StatisticEquipmentTable.vue":"ak8d","./Core/StatisticMaintenanceTable":"IB2h","./Core/StatisticMaintenanceTable.vue":"IB2h","./Core/StatisticTable":"T/Pj","./Core/StatisticTable.vue":"T/Pj","./Core/TableColumnFilterDialog":"EN35","./Core/TableColumnFilterDialog.vue":"EN35","./Core/TaskTable":"KSNB","./Core/TaskTable.vue":"KSNB","./Core/UserAuthorityTable":"le0F","./Core/UserAuthorityTable.vue":"le0F","./Core/UserTable":"7P3m","./Core/UserTable.vue":"7P3m","./HeadBar/HeadBar":"4bIh","./HeadBar/HeadBar.vue":"4bIh","./HeadBar/SmallHead":"xOnK","./HeadBar/SmallHead.vue":"xOnK","./Home":"j7e0","./Home.vue":"j7e0","./IFrame/IFrame":"NGlO","./IFrame/IFrame.vue":"NGlO","./Login":"lmfZ","./Login.vue":"lmfZ","./MainContent/MainContent":"u37B","./MainContent/MainContent.vue":"u37B","./Maintenance/Index":"u6HR","./Maintenance/Index.vue":"u6HR","./Maintenance/Record":"xaR7","./Maintenance/Record.vue":"xaR7","./Maintenance/Repair":"V9B5","./Maintenance/Repair.vue":"V9B5","./NavBar/NavBar":"w7g/","./NavBar/NavBar.vue":"w7g/","./Platform":"ps0i","./Platform/":"ps0i","./Platform/index":"ps0i","./Platform/index.vue":"ps0i","./Process/Index":"krRi","./Process/Index.vue":"krRi","./Process/Parameter":"4YDF","./Process/Parameter.vue":"4YDF","./Production/Index":"2nb2","./Production/Index.vue":"2nb2","./Sharp/StatisticMaintainChart":"1T77","./Sharp/StatisticMaintainChart.vue":"1T77","./Sharp/StatisticMaintainTable":"i0Tw","./Sharp/StatisticMaintainTable.vue":"i0Tw","./Sharp/StatisticRepairChart":"OVXC","./Sharp/StatisticRepairChart.vue":"OVXC","./Sharp/StatisticRepairTable":"/0Sh","./Sharp/StatisticRepairTable.vue":"/0Sh","./Statistic/Equipment":"C8xy","./Statistic/Equipment.vue":"C8xy","./Statistic/Index":"twcd","./Statistic/Index.vue":"twcd","./Statistic/Maintenance":"7bV1","./Statistic/Maintenance.vue":"7bV1","./Statistic/MaintenanceCopy":"Q5G0","./Statistic/MaintenanceCopy.vue":"Q5G0","./Task/Index":"DLxH","./Task/Index.vue":"DLxH","./User/Authority":"ABek","./User/Authority.vue":"ABek","./User/Index":"8DXv","./User/Index.vue":"8DXv"};function o(e){return a(r(e))}function r(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id="g9CB"},i0Tw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"StatisticMaintainChart",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,rowE:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,year:"",machineType:"",nameNumber:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"maintain",staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"row-class-name":e.rowstatus,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"},"row-style":{height:"60px"}}},e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("fUEP")},"data-v-711bd58e",null);t.default=s.exports},jI6r:function(e,t){},kWAW:function(e,t){},kdB0:function(e,t){},krRi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("NYxO"),d=a("m9+0"),u=a("mtWM"),m=a.n(u),p=a("AUIh"),h={components:{ProcessTable:d.default},data:function(){var e=this;return{size:"small",tableHeight:null,form:{date1:"",date2:""},filters:{name:""},columns:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageParams:{currPage:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,dialogVisibleB:!1,editLoading:!1,dataFormRules:{programNumber:[{required:!0,message:"请输入程序号",trigger:"blur"}]},refFormRules:{},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,materialName:"",materialCode:"",procedure:"",type:"",programNumber:"",material:""},refForm:{},matFormRules:{materialName:[{required:!0,message:"请输入物料名称",trigger:"blur"}],materialCode:[{required:!0,message:"请输入物料编码",trigger:"blur"}],procedure:[{required:!0,message:"请输入加工工序",trigger:"blur"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}]},matForm:{materialName:"",materialCode:"",procedure:"",type:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},selectMachineType:"",selectProcessName:"",machineType:[],processName:[],materialAll:[],material:{},materialForm:{name:"",code:"",type:""},show:!1,fileUrl:"",file:"",param:"",id:"",fileName:""}},computed:s()({},Object(c.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.productionProcessesName=t.selectProcessName,e.pageRequest.nameCode=t.dataForm.material,t.pageRequest=e.pageRequest),t.$api.process.findPage(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){}),t.pageResult=e.data,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;""==e.dataForm.material&&(e.materialForm.code=""),e.pageParams={currPage:1,pageSize:10,productionProcessesName:e.selectProcessName,nameCode:e.dataForm.material},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,e.$api.process.findPage(e.pageParams).then(function(t){console.log(t),t.data.data.forEach(function(e,t){}),e.pageResult=t.data,console.log(e.pageResult)}).then()},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){this.$api.configuration.batchDelete(e.params).then(null!=e?e.callback:"")},handleAdd:function(){var e=m.a.defaults.baseURL;this.dialogVisible=!0,this.operation=!0,this.dataForm=n()({}),this.matForm=n()({}),this.fileUrl=e+"/xaj/process/fileUpload",this.fileList=[]},handleCheck:function(e){this.dialogVisibleB=!0,console.log(e),this.material=n()({},e.row),console.log(this.material)},handleEdit:function(e){var t=m.a.defaults.baseURL;this.dialogVisible=!0,this.operation=!1,this.fileUrl=t+"/xaj/process/fileUpload",console.log(e),this.dataForm={programNumber:e.row.procedureNum},this.matForm={materialName:e.row.materialName,materialCode:e.row.materialCode,procedure:e.row.productionProcessesName},this.fileList=[],this.id=e.row.id,this.fileName=e.row.fileName},submitForm:function(){var e=this;e.operation?e.$refs.matForm.validate(function(t){t&&e.$refs.dataForm.validate(function(t){if(t){e.editLoading=!0,e.param.append("materialName",e.matForm.materialName),e.param.append("materialCode",e.matForm.materialCode),e.param.append("procedureNum",e.dataForm.programNumber),e.param.append("productionProcessesName",e.matForm.procedure);m.a.post("/xaj/process/addProcedure",e.param,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.$refs.matForm.resetFields(),1==t.status&&e.$message({message:"新增成功",type:"success"})})}})}):e.$refs.matForm.validate(function(t){t&&e.$refs.dataForm.validate(function(t){if(t){e.editLoading=!0,e.param.append("materialName",e.matForm.materialName),e.param.append("materialCode",e.matForm.materialCode),e.param.append("procedureNum",e.dataForm.programNumber),e.param.append("productionProcessesName",e.matForm.procedure),e.param.append("id",e.id),e.param.append("fileName",e.fileName);m.a.post("/xaj/process/updateProcedure",e.param,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.$refs.matForm.resetFields(),1==t.status&&e.$message({message:"修改成功",type:"success"})})}})})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(p.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"procedureNum",label:"程序号",minWidth:80},{prop:"materialName",label:"物料名称",minWidth:160},{prop:"materialCode",label:"物料编码",minWidth:100},{prop:"productionProcessesName",label:"加工工序",minWidth:100},{prop:"machineType",label:"设备类型",minWidth:100},{prop:"fileName",label:"程序文件",minWidth:160},{prop:"updateTime",label:"新增时间",minWidth:200}],this.filterColumns=JSON.parse(o()(this.columns))},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},onChange:function(e,t){},handleChange:function(e,t){this.file=e,console.log(this.file)},beforeUpload:function(e){console.log(e),this.param=new FormData,this.param.append("files",e,e.name)},querySearch:function(e,t){var a=this.materialAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},loadAll:function(){},handleSelect:function(e){console.log(e),this.materialForm={name:e.name,code:e.code,type:e.type},console.log(this.materialForm)},procedureBind:function(e){0==e.length?this.show=!0:this.show=!1}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,i.initColumns(),$.ajax({type:"GET",url:"/xaj/maintenance/findAllMachineType",success:function(e){$.each(e,function(e,t){i.machineType.push({value:t})})}}),$.ajax({type:"GET",url:"/xaj/configuration/findAllProductionProcesses",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)}),$.each(t,function(e,t){i.processName.push({value:t.productionProcessesName})})}}),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/mission/searchMaterial",data:{materialName:""},success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)}),$.each(t,function(e,t){i.materialAll.push({value:t.material,name:t.materialName,code:t.materialCode,type:t.specifications})})}})},500)}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"设备类型"},model:{value:e.selectMachineType,callback:function(t){e.selectMachineType=t},expression:"selectMachineType"}},e._l(e.machineType,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"工序名称"},model:{value:e.selectProcessName,callback:function(t){e.selectProcessName=t},expression:"selectProcessName"}},e._l(e.processName,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入物料名称或物料编码","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.material,callback:function(t){e.$set(e.dataForm,"material",t)},expression:"dataForm.material"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("Process-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns},on:{findPage:e.findPage,handleCheck:e.handleCheck,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"processDialog",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"120px",rules:e.dataFormRules,size:e.size,"label-position":"right",id:"form"}},[a("el-form",{ref:"matForm",staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"120px",model:e.matForm,rules:e.matFormRules}},[a("el-form-item",{attrs:{label:"物料名称",prop:"materialName"}},[a("el-input",{attrs:{id:"materialName"},model:{value:e.matForm.materialName,callback:function(t){e.$set(e.matForm,"materialName",t)},expression:"matForm.materialName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料编码",prop:"materialCode"}},[a("el-input",{attrs:{id:"materialCode"},model:{value:e.matForm.materialCode,callback:function(t){e.$set(e.matForm,"materialCode",t)},expression:"matForm.materialCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加工工序",prop:"procedure"}},[a("el-input",{attrs:{id:"procedure"},model:{value:e.matForm.procedure,callback:function(t){e.$set(e.matForm,"procedure",t)},expression:"matForm.procedure"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthA",attrs:{label:"设备类型",prop:"type"}},[a("el-select",{attrs:{size:"medium",placeholder:"设备类型"},model:{value:e.matForm.type,callback:function(t){e.$set(e.matForm,"type",t)},expression:"matForm.type"}},e._l(e.machineType,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"inputLength",attrs:{label:"程序号",prop:"programNumber"}},[a("el-input",{attrs:{id:"programNumber"},model:{value:e.dataForm.programNumber,callback:function(t){e.$set(e.dataForm,"programNumber",t)},expression:"dataForm.programNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"程序文件"}},[a("el-upload",{attrs:{id:"file",action:e.fileUrl,"file-list":e.fileList,"before-upload":e.beforeUpload,drag:""}},[a("i",{staticClass:"iconfont icon-ali-folder"}),e._v(" "),a("div",{staticClass:"el-upload__text text-click"},[e._v("点击或将程序文件拖拽到这里上传")]),e._v(" "),a("div",{staticClass:"el-upload__text text-fileType"},[e._v("支持扩展名：.rar .zip .doc .docx .pdf .jpg...")])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看",width:"50%",visible:e.dialogVisibleB,"custom-class":"processDialog",center:""},on:{"update:visible":function(t){e.dialogVisibleB=t}}},[a("el-form",{ref:"refForm",attrs:{model:e.refForm,"label-width":"120px",rules:e.refFormRules,size:e.size,"label-position":"right"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"物料名称"}},[a("el-input",{attrs:{id:"materialName",disabled:""},model:{value:e.material.materialName,callback:function(t){e.$set(e.material,"materialName",t)},expression:"material.materialName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料编码"}},[a("el-input",{attrs:{id:"materialCode",disabled:""},model:{value:e.material.materialCode,callback:function(t){e.$set(e.material,"materialCode",t)},expression:"material.materialCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加工工序"}},[a("el-input",{attrs:{id:"procedure",disabled:""},model:{value:e.material.procedure,callback:function(t){e.$set(e.material,"procedure",t)},expression:"material.procedure"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthA",attrs:{label:"设备类型"}},[a("el-select",{attrs:{size:"medium",placeholder:"设备类型",disabled:""},model:{value:e.material.type,callback:function(t){e.$set(e.material,"type",t)},expression:"material.type"}},e._l(e.machineType,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(e){a("kdB0")},null,null);t.default=g.exports},le0F:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"UserAuthorityTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowA:Array,rowB:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){t.$message({message:"删除成功",type:"success"}),t.findPage(),t.loading=!1}})}).catch(function(){})},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},handleFill:function(e,t){var a=[e,t];this.$emit("handle-fill",a)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3037138854)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}})],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("7jZw")},"data-v-6a19e026",null);t.default=s.exports},"m9+0":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"ProcessTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,procedureNum:"",productionProcessesName:"",nameCode:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleCheck:function(e,t){this.$emit("handleCheck",{index:e,row:t})},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){200==e.code?(t.$message({message:"删除成功",type:"success"}),t.findPage()):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.loading=!1}})}).catch(function(){})},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonC:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"230","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleCheck(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")])]}}],null,!1,3314642003)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("qlWJ")},"data-v-f516b4d8",null);t.default=s.exports},mk2o:function(e,t){},oor5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"ProcessParameterTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,rowD:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,machineNumber:"",productionProcessesName:"",nameCode:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleCheck:function(e,t){this.$emit("handleCheck",{index:e,row:t})},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"parameter",staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleCheck(t.$index,t.row)}}},[e._v("查看")])]}}],null,!1,3060956233)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("R197")},"data-v-65a72746",null);t.default=s.exports},qlWJ:function(e,t){},quq6:function(e,t){},srjs:function(e,t){},twcd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("Dd8w"),n=a.n(r),l=a("NYxO"),s=a("T/Pj"),c=(a("AUIh"),{components:{StatisticTable:s.default},data:function(){var e=this;return{inputs:[{}],size:"small",tableHeight:null,form:{date1:"",date2:""},select:"byDay",dateArr:[],filters:{name:""},columns:[],rowA:[],rowB:[],rowC:[],rowD:[],rowE:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageParams:{currPage:1,pageSize:10},chartRequest:{},pageResult:{},operation:!0,dialogVisible:!1,action:!0,dialogVisibleB:!1,editLoading:!1,editLoadingB:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],decNum:[{required:!0,message:"请输入数量",trigger:"blur"}]},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,decNum:"",user:""},refForm:{dev_value:"",per_value:""},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(t){if(""!=e.form.date2)return t.getTime()>e.form.date2}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.date1}},pickerOptionsA:{disabledDate:function(t){if(""!=e.planTime.date2)return t.getTime()>e.planTime.date2}},pickerOptionsB:{disabledDate:function(t){return t.getTime()<e.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",working:{},planTime:{date1:"",date2:""},isTable:!1,radio1:"图形",mychartOne:"",xAxisDate:["6/10","6/11","6/12","6/13","6/14","6/15","6/16","6/17","6/18","6/19","6/20","6/21","6/22","6/23","6/24","6/25","6/26","6/27"],quantity:[420,320,340,280,180,160,100,280,450,520,320,430,190,290,100,195,310,420],productionTime:[5.8,4.8,5.2,3.5,2.5,1.8,1.2,3.7,7.2,7.8,4.2,7.1,3.1,3.9,1.1,2.9,4.5,5.8],packageNum:"",durationNum:"",userForm:{nameMobile:""},chart_fontSize_10:10,chart_fontSize_14:14,chart_fontSize_16:16}},computed:n()({},Object(l.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),watch:{"$store.state.app.collapse":function(e){this.mychartOne.resize()}},methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.period=t.select,e.pageRequest.nameMobile=t.dataForm.user,"byYear"==t.select?(e.pageRequest.startTime=t.form.date1,e.pageRequest.endTime=t.form.date2):(e.pageRequest.startTime=t.dateArr[0],e.pageRequest.endTime=t.dateArr[1]),t.pageRequest=e.pageRequest),t.$api.statistic.findPage(t.pageRequest).then(function(e){console.log(e),e.data.data.person_list.data.forEach(function(e,t){}),t.pageResult=e.data.data.person_list,console.log(t.pageResult)}).then(null!=e?e.callback:""),$.get("/xaj/statistic/searchEmployeePerformanceList",t.pageRequest).then(function(e){console.log(e),e.data.forEach(function(e,t){}),t.pageResult=e,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e,t,a=this;null==a.dateArr&&(a.dateArr=[]),""!=a.form.date1&&null!=a.form.date1||(a.form.date1=void 0),""!=a.form.date2&&null!=a.form.date2||(a.form.date2=void 0),""==a.dataForm.user&&(a.userForm.nameMobile=""),"byYear"==a.select?(e=a.form.date1,t=a.form.date2):(e=a.dateArr[0],t=a.dateArr[1]),console.log(e),a.pageParams={currPage:1,pageSize:10,startTime:e,endTime:t,period:a.select,nameMobile:a.dataForm.user},console.log(a.pageParams),a.pageRequest.pageSize=10,a.pageRequest.currPage=1,$.get("/xaj/statistic/searchEmployeePerformanceList",a.pageParams).then(function(e){console.log(e),e.data.forEach(function(e,t){}),a.pageResult=e,console.log(a.pageResult)}).then(),a.findChart()},submitForm:function(){var e=this;e.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0,e.operation?$.ajax({type:"GET",url:"/xaj/production/splitOrder",data:e.paramsSplit,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.inputs=[{}]}}):$.ajax({type:"POST",url:"/xaj/production/sendOrder",data:e.paramsSend,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.refForm.resetFields()}})})})},initColumns:function(){this.columns=[{prop:"name",label:"员工姓名",minWidth:100},{prop:"groupName",label:"所属部门",minWidth:100},{prop:"materialName",label:"物料名称",minWidth:150},{prop:"materialCode",label:"物料编码",minWidth:100},{prop:"specifications",label:"规格型号",minWidth:90},{prop:"productionProcessesName",label:"生产工序",minWidth:90},{prop:"machine",label:"生产设备",minWidth:90},{prop:"nowQuantity",label:"生产数量",minWidth:90},{prop:"productionStartTime",label:"开始时间",minWidth:100},{prop:"updateTime",label:"完成时间",minWidth:100},{prop:"productionTime",label:"生产用时",minWidth:100}],this.filterColumns=JSON.parse(o()(this.columns))},chooseRadio:function(e){"图形"==e?(this.isTable=!1,this.findChart()):this.isTable=!0},querySearch:function(e,t){var a=this.userAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},handleSelect:function(e){console.log(e),this.userForm={nameMobile:e.value},console.log(this.userForm)},findChart:function(){var e,t,a=this;"byYear"==a.select?(e=a.form.date1,t=a.form.date2):(e=a.dateArr[0],t=a.dateArr[1]),a.chartRequest={period:a.select,startTime:e,endTime:t,nameMobile:a.dataForm.user},a.xAxisDate=[],a.quantity=[],a.productionTime=[],console.log(a.chartRequest),a.$api.statistic.findChart(a.chartRequest).then(function(e){console.log(e);var t=e.data.data.person_chart.data;$.each(t,function(e,t){if("byYear"==a.select)var i=t.nowDate+"年";else(i=t.nowDate.split("-")).length<3?(i.splice(0,1),i+="月"):(i.splice(0,1),i=i.join("/"));console.log(i),a.xAxisDate.push(i),a.quantity.push(t.quantity),a.productionTime.push(t.productionTime),console.log(a.xAxisDate,a.quantity,a.productionTime)}),a.chart_fontSize_10=10*document.documentElement.clientWidth/1920*1,a.chart_fontSize_14=10*document.documentElement.clientWidth/1920*1.4,a.chart_fontSize_16=10*document.documentElement.clientWidth/1920*1.6,a.mychartOne=a.$echarts.init(document.getElementById("job")),setTimeout(function(){a.mychartOne.setOption({grid:{top:8*a.chart_fontSize_10,left:8*a.chart_fontSize_10,right:7*a.chart_fontSize_10},legend:{left:"center",top:"top",textStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},data:[{name:"生产数量(件)",icon:"circle"},{name:"工作时长(hour)",icon:"triangle"}]},xAxis:{axisLine:{lineStyle:{color:"#848080"}},axisTick:{inside:!0,length:2*a.chart_fontSize_10,lineStyle:{color:"#848080"}},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},data:a.xAxisDate},yAxis:[{name:"单位：件",nameTextStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},min:0,splitNumber:5,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},splitLine:{show:!0,lineStyle:{color:"#C1C0C0"}}},{name:"单位：hour",nameTextStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},min:0,splitNumber:5,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},splitLine:{show:!1}}],series:[{type:"line",name:"生产数量(件)",yAxisIndex:0,symbol:"circle",symbolSize:16,emphasis:{label:{show:!0,color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"}},itemStyle:{color:"#8BC34A",borderColor:"#8BC34A"},lineStyle:{color:"#8BC34A",width:1},data:a.quantity},{type:"line",name:"工作时长(hour)",yAxisIndex:1,symbol:"triangle",symbolSize:a.chart_fontSize_16,emphasis:{label:{show:!0,color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"}},itemStyle:{color:"#485ABF",borderColor:"#485ABF"},lineStyle:{color:"#485ABF",width:1},data:a.productionTime}]})},500)}).then(),$.get("/xaj/statistic/searchEmployeePerformanceChart",a.chartRequest).then(function(e){console.log(e);var t=e;$.each(t,function(e,t){if("byYear"==a.select)var i=t.nowDate+"年";else(i=t.nowDate.split("-")).length<3?(i.splice(0,1),i+="月"):(i.splice(0,1),i=i.join("/"));console.log(i),a.xAxisDate.push(i),a.quantity.push(t.quantity),a.productionTime.push(t.productionTime),console.log(a.xAxisDate,a.quantity,a.productionTime)}),a.chart_fontSize_10=10*document.documentElement.clientWidth/1920*1,a.chart_fontSize_14=10*document.documentElement.clientWidth/1920*1.4,a.chart_fontSize_16=10*document.documentElement.clientWidth/1920*1.6,a.mychartOne=a.$echarts.init(document.getElementById("job")),setTimeout(function(){a.mychartOne.setOption({grid:{top:8*a.chart_fontSize_10,left:8*a.chart_fontSize_10,right:7*a.chart_fontSize_10},legend:{left:"center",top:"top",textStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},data:[{name:"生产数量(件)",icon:"circle"},{name:"工作时长(hour)",icon:"triangle"}]},xAxis:{axisLine:{lineStyle:{color:"#848080"}},axisTick:{inside:!0,length:2*a.chart_fontSize_10,lineStyle:{color:"#848080"}},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},data:a.xAxisDate},yAxis:[{name:"单位：件",nameTextStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},min:0,splitNumber:5,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},splitLine:{show:!0,lineStyle:{color:"#C1C0C0"}}},{name:"单位：hour",nameTextStyle:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},min:0,splitNumber:5,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"},splitLine:{show:!1}}],series:[{type:"line",name:"生产数量(件)",yAxisIndex:0,symbol:"circle",symbolSize:16,emphasis:{label:{show:!0,color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"}},itemStyle:{color:"#8BC34A",borderColor:"#8BC34A"},lineStyle:{color:"#8BC34A",width:1},data:a.quantity},{type:"line",name:"工作时长(hour)",yAxisIndex:1,symbol:"triangle",symbolSize:a.chart_fontSize_16,emphasis:{label:{show:!0,color:"#101010",fontSize:a.chart_fontSize_14,fontFamily:"SourceHanSansSC-regular"}},itemStyle:{color:"#485ABF",borderColor:"#485ABF"},lineStyle:{color:"#485ABF",width:1},data:a.productionTime}]})},500)}).then()}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-270,i.initColumns(),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/user/searchAllUsers",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].name&&(o=!1)}),o&&a.push({value:t[e].name})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].mobile&&(i=!1)}),i&&o.push({value:t[e].mobile})}),i.userAll=a.concat(o),console.log(i.userAll)}})},500),console.log(i.filterColumns),i.findChart(),console.log(i.xAxisDate,i.quantity,i.productionTime),console.log(localStorage.getItem("groupId"),localStorage.getItem("icCardNum")),window.onresize=function(){i.mychartOne.resize()}}}),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{margin:"0 auto","padding-top":"10px","padding-right":"15px",float:"initial"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"120px"}},[a("el-select",{attrs:{size:"medium",placeholder:"请选择"},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"按日",value:"byDay"}}),e._v(" "),a("el-option",{attrs:{label:"按月",value:"byMonth"}}),e._v(" "),a("el-option",{attrs:{label:"按年",value:"byYear"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"300px"}},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"byDay"==e.select,expression:"select=='byDay'"}],attrs:{size:"medium",type:"daterange","range-separator":"—","start-placeholder":"起始时间","end-placeholder":"结束时间"},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"byMonth"==e.select,expression:"select=='byMonth'"}],attrs:{size:"medium",type:"monthrange","range-separator":"—","start-placeholder":"起始时间","end-placeholder":"结束时间"},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}}),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"byYear"==e.select,expression:"select=='byYear'"}],attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"起始时间",size:"medium","picker-options":e.pickerOptions0,clearable:!1},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"byYear"==e.select,expression:"select=='byYear'"}],staticClass:"line",staticStyle:{color:"#303133"},attrs:{span:2}},[e._v("—")]),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"byYear"==e.select,expression:"select=='byYear'"}],attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"结束时间",size:"medium","picker-options":e.pickerOptions1,clearable:!1},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1),e._v(" "),a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入员工姓名或手机号码","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.user,callback:function(t){e.$set(e.dataForm,"user",t)},expression:"dataForm.user"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"titlebar"},[a("span",[e._v("员工工作绩效")]),e._v(" "),a("el-radio-group",{attrs:{size:"mini"},on:{change:e.chooseRadio},model:{value:e.radio1,callback:function(t){e.radio1=t},expression:"radio1"}},[a("el-radio-button",{attrs:{label:"图形"}}),e._v(" "),a("el-radio-button",{attrs:{label:"表格"}})],1)],1),e._v(" "),e.isTable?e._e():a("div",{staticStyle:{position:"relative"},style:{height:e.tableHeight+"px"}},[a("div",{staticClass:"chart-title chart-title-left"},[e._v("生产件数")]),e._v(" "),a("div",{staticClass:"chart-title chart-title-right"},[e._v("工作时长")]),e._v(" "),a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"job"}})]),e._v(" "),e.isTable?a("div",[a("Statistic-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns},on:{findPage:e.findPage}})],1):e._e()])},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("5d5z")},null,null);t.default=u.exports},ukkT:function(e,t){},wbNz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("IcnI");var o={name:"KtButton",props:{label:{type:String,default:"Button"},icon:{type:String,default:""},size:{type:String,default:"mini"},type:{type:String,default:null},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},perms:{type:String,default:null}},data:function(){return{}},methods:{handleClick:function(){this.$emit("click",{})},hasPerms:function(e){return function(e){for(var t=!1,a=i.a.state.user.perms,o=0,r=a.length;o<r;o++)if(a[o]===e){t=!0;break}return t}(e)&!this.disabled}},mounted:function(){}},r={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-button",{attrs:{size:e.size,type:e.type,icon:e.icon,loading:e.loading,disabled:!e.hasPerms(e.perms)},on:{click:e.handleClick}},[e._v("\n  "+e._s(e.label)+"\n")])},staticRenderFns:[]};var n=a("VU/8")(o,r,!1,function(e){a("quq6")},"data-v-2c4a780f",null);t.default=n.exports},xaR7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("bOdI"),d=a.n(c),u=a("NYxO"),m=a("72lX"),p=a("AUIh"),h={components:{MaintenanceRecordTable:m.default},data:function(){var e,t=this;return{size:"small",tableHeight:null,device:"",cycle:"",status:"",dateArr:[],form:{date1:"",date2:""},filters:{name:""},columns:[],rowA:[],rowB:[],filterColumns:[],pageRequest:{currPage:1,pageSize:10},pageParams:{currPage:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],type:[{required:!0,message:"请选择要进行保养的设备！",trigger:"blur"}],time:[{required:!0,message:"设置该类型设备的保养时间，系统自动到时通知相关责任人！",trigger:"blur"}]},dataForm:(e={id:0,name:"",password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,file:"",type:"",time:"",planProduction:""},d()(e,"name",""),d()(e,"type",""),d()(e,"number",""),d()(e,"date",""),d()(e,"content",""),e),deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(e){if(""!=t.form.date2)return e.getTime()>t.form.date2}},pickerOptions1:{disabledDate:function(e){return e.getTime()<t.form.date1}},pickerOptionsA:{disabledDate:function(e){if(""!=t.planTime.date2)return e.getTime()>t.planTime.date2}},pickerOptionsB:{disabledDate:function(e){return e.getTime()<t.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},maintenance:{},maintenanceContent:"",fillParams:{}}},computed:s()({},Object(u.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){var t=this;null!==e&&(e.pageRequest.status=t.status,e.pageRequest.startTime=t.dateArr[0],e.pageRequest.endTime=t.dateArr[1],t.pageRequest=e.pageRequest),t.$api.maintenance.findRecordPage(t.pageRequest).then(function(e){e.data.data.record.data.forEach(function(e,t){switch(e.status){case 0:e.status="未保养";break;case 1:e.status="已保养"}switch(e.period){case"byYear":e.period="按年";break;case"byMonth":e.period="按月";break;case"byDay":e.period="按日"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data.data.record,console.log(t.pageResult)}).then(null!=e?e.callback:""),$.get("/xaj/maintenance/searchMaintenanceRecordList",t.pageRequest).then(function(e){e.data.forEach(function(e,t){switch(e.status){case 0:e.status="未保养";break;case 1:e.status="已保养"}switch(e.period){case"byYear":e.period="按年";break;case"byMonth":e.period="按月";break;case"byDay":e.period="按日"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;null==e.dateArr&&(e.dateArr=[]),e.pageParams={currPage:1,pageSize:10,startTime:e.dateArr[0],endTime:e.dateArr[1],status:e.status},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,$.get("/xaj/maintenance/searchMaintenanceRecordList",e.pageParams).then(function(t){t.data.forEach(function(e,t){switch(e.status){case 0:e.status="未保养";break;case 1:e.status="已保养"}switch(e.period){case"byYear":e.period="按年";break;case"byMonth":e.period="按月";break;case"byDay":e.period="按日"}e.id<10&&(e.id="0"+e.id)}),e.pageResult=t,console.log(e.pageResult)}).then()},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){this.$api.maintenance.batchDelete(e.params).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:0,name:"",password:"",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,type:"",time:""}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=n()({},e.row)},submitForm:function(){var e=this;e.$refs.dataForm.validate(function(t){t&&(e.editLoading=!0,e.fillParams={id:e.dataForm.id,remark:e.dataForm.content,machineNumber:e.dataForm.number},console.log(e.fillParams),$.ajax({type:"GET",url:"/xaj/maintenance/reportMaintenanceRecord",data:e.fillParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),1==t.status&&e.$message({message:"填报成功",type:"success"})}}))})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(p.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"machineNumber",label:"设备编号",minWidth:100},{prop:"machine",label:"设备名称",minWidth:120},{prop:"machineType",label:"设备类型",minWidth:120},{prop:"period",label:"保养周期",minWidth:100},{prop:"maintenanceDate",label:"保养时间",minWidth:120},{prop:"ddPerson",label:"担当人",minWidth:100},{prop:"zrPerson",label:"责任人",minWidth:100},{prop:"remark",label:"备注",minWidth:70},{prop:"updateTime",label:"新增时间",minWidth:160},{prop:"status",label:"状态",minWidth:100}],this.filterColumns=JSON.parse(o()(this.columns))},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},beforeUpload:function(e){console.log(e);var t=e.name;this.dataForm.file=t,$("#myFile").val(t);var a=t.split(".");if(console.log(a[a.length-1].toLowerCase()),"xls"==a[a.length-1].toLowerCase()||"xlsx"==a[a.length-1].toLowerCase())return this.tips="导入成功",this.isSuccess=!0,!0;this.tips="文件类型错误",this.isSuccess=!1},onChange:function(e,t){},tableRowClassName:function(e){var t=e.row,a=e.rowIndex,i=$(".el-table .el-table__body-wrapper tbody tr:eq(0) td").length-1;"未保养"==t.status?($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#E51C23"}),this.rowA.indexOf(a)<0&&this.rowA.push(a),this.rowB.indexOf(a)>-1&&this.rowB.splice(this.rowB.indexOf(a),1)):"已保养"==t.status&&($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#3F51B5"}),this.rowB.indexOf(a)<0&&this.rowB.push(a),this.rowA.indexOf(a)>-1&&this.rowA.splice(this.rowA.indexOf(a),1))},handleFill:function(e){console.log(e);var t=e[1];this.dataForm.id=t.id,this.dataForm.name=t.machine,this.dataForm.type=t.machineType,this.dataForm.number=t.machineNumber,this.dataForm.date=t.maintenanceDate,this.dataForm.content=t.remark,this.dialogVisible=!0,this.operation=!0},handleCheck:function(e){console.log(e);var t=e[1];this.dataForm.id=t.id,this.dataForm.name=t.machine,this.dataForm.type=t.machineType,this.dataForm.number=t.machineNumber,this.dataForm.date=t.maintenanceDate,this.dataForm.content=t.remark,this.dialogVisible=!0,this.operation=!1},handleRemove:function(e,t){console.log(e,t)}},mounted:function(){var e,t,a,i=this;i.initColumns(),e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,console.log(i.filterColumns),console.log(i.rowA,i.rowB,i.text)}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",{staticStyle:{width:"300px"}},[a("el-date-picker",{attrs:{size:"medium",type:"daterange","range-separator":"—","start-placeholder":"起始时间","end-placeholder":"结束时间"},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"110px"}},[a("el-select",{attrs:{size:"medium",placeholder:"所有状态"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("el-option",{attrs:{label:"未保养",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"已保养",value:"1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("Maintenance-record-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns,rowstatus:e.tableRowClassName,rowA:e.rowA,rowB:e.rowB},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete,"handle-fill":e.handleFill,"handle-check":e.handleCheck}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"填报":"查看",width:"50%",visible:e.dialogVisible,"custom-class":"dialogHeight",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"100px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[a("div",{staticClass:"sub-title"},[e._v("保养设备信息：")]),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备名称",prop:"name"}},[a("el-input",{attrs:{id:"maintenanceName",disabled:!0},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型",prop:"type"}},[a("el-input",{attrs:{id:"maintenanceType",disabled:!0},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",prop:"number"}},[a("el-input",{attrs:{id:"maintenanceNumber",disabled:!0},model:{value:e.dataForm.number,callback:function(t){e.$set(e.dataForm,"number",t)},expression:"dataForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"保养时间",prop:"date"}},[a("el-input",{attrs:{id:"maintenanceMonth",disabled:!0},model:{value:e.dataForm.date,callback:function(t){e.$set(e.dataForm,"date",t)},expression:"dataForm.date"}})],1)],1),e._v(" "),a("div",{staticClass:"sub-title"},[e._v("保养内容：")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请填写具体保养的内容！",resize:"none"},model:{value:e.dataForm.content,callback:function(t){e.$set(e.dataForm,"content",t)},expression:"dataForm.content"}})],1)],1),e._v(" "),e.operation?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1):e._e()],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(e){a("UBhS")},null,null);t.default=g.exports},"yg+h":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("NYxO"),n={name:"ConfigurationMaterialTable",props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,rowstatus:Function,rowA:Array,rowB:Array,rowC:Array,text:Array,size:{type:String,default:"medium"},align:{type:String,default:"left"},maxHeight:{type:Number,default:1e3},height:{type:Number,default:250},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{currPage:1,pageSize:10,groupId:"",status:"",nameCode:""},loading:!1,selections:[],btnstatus:!0,dialogVisible:!1,editLoading:!1}},computed:o()({},Object(r.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.currPage=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},handleLock:function(e,t){var a=this;console.log(t.status);var i="正常"==t.status?"禁用":"启用";this.$confirm("您确定"+i+"该内容吗？","确认").then(function(){switch(t.status){case"正常":t.status=1;break;case"禁用":t.status=0}var e={id:t.id,status:t.status};a.loading=!0;a.$emit("handle-lock",{params:e,callback:function(e){a.findPage(),a.loading=!1}})}).catch(function(){})},delete:function(e){var t=this;this.$confirm("您确认删除该项内容吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),o=0;o<i.length;o++)a.push({id:i[o]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){t.$message({message:"删除成功",type:"success"}),t.findPage(),t.loading=!1}})}).catch(function(){})},showButtonA:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonB:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showButtonC:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},showText:function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0},indexExtend:function(e){return e+1+this.pageRequest.pageSize*(this.pageRequest.currPage-1)}},mounted:function(){this.refreshPageRequest(1),console.log(this.rowA,this.rowB,this.text)}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.data,"highlight-current-row":e.highlightCurrentRow,border:e.border,stripe:e.stripe,"max-height":e.maxHeight,height:e.height,size:e.size,"row-class-name":e.rowstatus,"header-cell-style":{"background-color":"#E8ECEB",color:"#424242"}},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",type:"index",index:e.indexExtend}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作","min-width":"230","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showText(t.$index,e.text)?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonA(t.$index,e.rowA),expression:"showButtonA(scope.$index,rowA)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleLock(t.$index,t.row)}}},[e._v("禁用")]):a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showButtonA(t.$index,e.rowA),expression:"showButtonA(scope.$index,rowA)"}],style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleLock(t.$index,t.row)}}},[e._v("启用")]),e._v(" "),e.showButtonB(t.$index,e.rowB)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]):e._e(),e._v(" "),e.showButtonC(t.$index,e.rowC)?a("el-button",{style:{color:e.themeColor,"border-color":e.themeColor},attrs:{size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}],null,!1,2448331924)}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px",position:"absolute",bottom:"20px",right:"0"}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.currPage,"page-size":e.pageRequest.pageSize,total:e.data.total},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,l,!1,function(e){a("LXM6")},"data-v-6ad72de1",null);t.default=s.exports},zR0r:function(e,t){},zU9v:function(e,t){},zke3:function(e,t){},zlEG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),r=a("woOf"),n=a.n(r),l=a("Dd8w"),s=a.n(l),c=a("bOdI"),d=a.n(c),u=a("NYxO"),m=a("9GPq"),p=a("AUIh"),h={components:{ConfigurationDeviceTable:m.default},data:function(){var e,t=this;return{size:"small",tableHeight:null,form:{date1:"",date2:""},filters:{name:""},columns:[],rowA:[],rowB:[],rowC:[],text:[],filterColumns:[],pageRequest:{groupId:"",currPage:1,pageSize:10},pageParams:{},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],code:[{required:!0,validator:function(e,a,i){if(!a)return i(new Error("请输入设备编号"));var o={machineNumber:a};a==t.initCode?(console.log("原编码："+t.initCode),i()):$.ajax({type:"GET",url:"/xaj/configuration/sameMachine",data:o,success:function(e){1==e.status?i():i(new Error(e.msg))}})},trigger:"blur"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],category:[{required:!0,message:"请输入设备型号",trigger:"blur"}],department:[{required:!0,message:"请选择所属车间",trigger:"change"}]},dataForm:(e={id:0,password:"123456",deptId:1,deptName:"",email:"test@qq.com",mobile:"13889700023",status:1,file:"",type:"",time:"",planProduction:"",device:"",name:"",code:""},d()(e,"type",""),d()(e,"category",""),d()(e,"department",""),e),deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[],pickerOptions0:{disabledDate:function(e){if(""!=t.form.date2)return e.getTime()>t.form.date2}},pickerOptions1:{disabledDate:function(e){return e.getTime()<t.form.date1}},pickerOptionsA:{disabledDate:function(e){if(""!=t.planTime.date2)return e.getTime()>t.planTime.date2}},pickerOptionsB:{disabledDate:function(e){return e.getTime()<t.planTime.date1}},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],isSuccess:!0,tips:"",planTime:{date1:"",date2:""},deviceAll:[],deviceForm:{nameCode:""},equipment:{procedure:[]},show:!0,addParams:{},machineType:[],department:[{value:"14",label:"塑焊车间"},{value:"16",label:"装配车间"},{value:"17",label:"金工车间"},{value:"18",label:"注塑车间"},{value:"20",label:"缠绕车间"}],procedures:[],welfareOptions:[],initCode:"",id:""}},computed:s()({},Object(u.b)({themeColor:function(e){return e.app.themeColor},collapse:function(e){return e.app.collapse}})),methods:{findPage:function(e){console.log(e);var t=this;null!==e&&(e.pageRequest.nameCode=t.dataForm.device,t.pageRequest=e.pageRequest),t.$api.configuration.findPageDevice(t.pageRequest).then(function(e){console.log(e),e.data.data.machine.data.forEach(function(e,t){switch(e.status){case 0:e.status="报废";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data.data.machine,console.log(t.pageResult)}).then(null!=e?e.callback:""),t.$api.configuration.findPageDevice(t.pageRequest).then(function(e){console.log(e),e.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="报废";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),t.pageResult=e.data,console.log(t.pageResult)}).then(null!=e?e.callback:"")},searchPage:function(){var e=this;""==e.dataForm.device&&(e.deviceForm.nameCode=""),e.pageParams={currPage:1,pageSize:10,groupId:parseInt(localStorage.getItem("groupId")),nameCode:e.dataForm.device},e.pageRequest.pageSize=10,e.pageRequest.currPage=1,e.$api.configuration.findPageDevice(e.pageParams).then(function(t){console.log(t),t.data.data.forEach(function(e,t){switch(e.status){case 0:e.status="报废";break;case 1:e.status="正常"}e.id<10&&(e.id="0"+e.id)}),e.pageResult=t.data,console.log(e.pageResult)}).then()},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){console.log(e);var t=this,a={id:e.params[0].id};$.ajax({type:"POST",url:"/xaj/configuration/deleteMachine",data:a,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm=n()({}),this.welfareOptions=[],this.equipment.procedure=[],this.show=!0},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,console.log(e),this.initCode=e.row.machineNumber,this.dataForm={name:e.row.machine,code:e.row.machineNumber,type:e.row.machineType,category:e.row.modelNumber,department:e.row.groupId},this.welfareOptions=[],this.equipment.procedure=[],this.show=!0,this.id=e.row.id},handleLock:function(e){var t=this;$.ajax({type:"POST",url:"/xaj/configuration/updateMachineStatus",data:e.params,success:function(e){console.log(e),t.editLoading=!1}}).then(null!=e?e.callback:"")},submitForm:function(){var e=this;e.operation?e.$refs.dataForm.validate(function(t){t&&(e.show||(e.editLoading=!0,e.addParams={machine:e.dataForm.name,machineNumber:e.dataForm.code,machineType:e.dataForm.type,modelNumber:e.dataForm.category,groupId:e.dataForm.department,data:o()(e.welfareOptions[e.welfareOptions.length-1])},console.log(e.addParams),$.ajax({type:"POST",url:"/xaj/configuration/addMachine",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.welfareOptions=[],e.equipment.procedure=[],1==t.status&&e.$message({message:"新增成功",type:"success"})}})))}):e.$refs.dataForm.validate(function(t){t&&(e.show||(e.editLoading=!0,e.addParams={machine:e.dataForm.name,machineNumber:e.dataForm.code,machineType:e.dataForm.type,modelNumber:e.dataForm.category,groupId:e.dataForm.department,data:o()(e.welfareOptions[e.welfareOptions.length-1]),id:e.id},console.log(e.addParams),$.ajax({type:"GET",url:"/xaj/configuration/updateMachine",data:e.addParams,success:function(t){console.log(t),e.dialogVisible=!1,e.editLoading=!1,e.findPage(null),e.$refs.dataForm.resetFields(),e.welfareOptions=[],e.equipment.procedure=[],1==t.status&&e.$message({message:"修改成功",type:"success"})}})))})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(p.a)(e[t.property])},initColumns:function(){this.columns=[{prop:"machine",label:"设备名称",minWidth:100},{prop:"machineNumber",label:"设备编号",minWidth:110},{prop:"machineType",label:"设备类型",minWidth:100},{prop:"modelNumber",label:"型号",minWidth:80},{prop:"workShop",label:"所属车间",minWidth:100},{prop:"productionProcessesName",label:"关联工序",minWidth:120},{prop:"updateTime",label:"新增时间",minWidth:150},{prop:"status",label:"状态",minWidth:100}],this.filterColumns=JSON.parse(o()(this.columns))},handleError:function(e,t,a){console.log(e)},handleExceed:function(e,t){console.log(e)},onChange:function(e,t){},querySearch:function(e,t){var a=this.deviceAll;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.value.toLowerCase().indexOf(e.toLowerCase())>-1}},loadAll:function(){},handleSelect:function(e){console.log(e),this.deviceForm={nameCode:e.value},console.log(this.deviceForm)},tableRowClassName:function(e){var t=e.row,a=e.rowIndex,i=$(".el-table .el-table__body-wrapper tbody tr:eq(0) td").length-1;"正常"==t.status?($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#3F51B5"}),this.rowA.indexOf(a)<0&&this.rowA.push(a),this.rowB.indexOf(a)<0&&this.rowB.push(a),this.rowC.indexOf(a)<0&&this.rowC.push(a),this.text.indexOf(a)<0&&this.text.push(a)):"报废"==t.status&&($(".el-table .el-table__body-wrapper tbody tr:eq("+a+") td:eq("+(i-1)+")").css({color:"#E51C23"}),this.rowA.indexOf(a)<0&&this.rowA.push(a),this.text.indexOf(a)>-1&&this.text.splice(this.text.indexOf(a),1),this.rowB.indexOf(a)>-1&&this.rowB.splice(this.rowB.indexOf(a),1),this.rowC.indexOf(a)>-1&&this.rowC.splice(this.rowC.indexOf(a),1))},handleWelfareTreatmentChange:function(e,t,a){e.length;this.equipment.procedure=e,console.log(e),0==this.equipment.procedure.length?this.show=!0:this.show=!1;var i=$("input:checkbox[name='fulicheckbox']:checked").map(function(e,t){return JSON.parse($(t).parents(".el-checkbox").attr("data-value"))}).get();console.log(i),this.welfareOptions.push(i)}},mounted:function(){var e,t,a,i=this;e=$(window).height(),t=$(".headbar").height(),a=$(".tabs").height(),i.tableHeight=e-t-a-200,i.initColumns(),$.ajax({type:"GET",url:"/xaj/maintenance/findAllMachineType",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)}),$.each(t,function(e,t){i.machineType.push({value:t})})}}),$.ajax({type:"GET",url:"/xaj/configuration/findAllProductionProcesses",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)}),$.each(t,function(e,t){var a={code:t.productionProcessesCode,name:t.productionProcessesName};a=o()(a),i.procedures.push({label:t.productionProcessesName,value:a})})}}),console.log(i.procedures),setTimeout(function(){$.ajax({type:"GET",url:"/xaj/configuration/searchAllMachine",success:function(e){var t=[];$.each(e,function(e,a){null!==a&&t.push(a)});var a=[];$.each(t,function(e,i){var o=!0;a.length>0&&$.each(a,function(i,r){a[i].value==t[e].machineName&&(o=!1)}),o&&a.push({value:t[e].machineName})});var o=[];$.each(t,function(e,a){var i=!0;o.length>0&&$.each(o,function(a,r){o[a].value==t[e].machineNumber&&(i=!1)}),i&&o.push({value:t[e].machineNumber})}),i.deviceAll=a.concat(o),console.log(i.deviceAll)}})},500)}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",[a("el-autocomplete",{staticStyle:{color:"#101010"},attrs:{"prefix-icon":"iconfont icon-ali-search",size:"medium","popper-class":"auto-select","fetch-suggestions":e.querySearch,placeholder:"请输入设备名称或设备编号","trigger-on-focus":!1,clearable:""},on:{select:e.handleSelect},model:{value:e.dataForm.device,callback:function(t){e.$set(e.dataForm,"device",t)},expression:"dataForm.device"}})],1),e._v(" "),a("el-form-item",[a("el-button",{style:{"background-color":e.themeColor,color:"#fff","border-color":e.themeColor},attrs:{size:"medium"},on:{click:function(t){return e.searchPage()}}},[e._v("查询")])],1)],1)],1),e._v(" "),a("Configuration-device-table",{attrs:{height:e.tableHeight,data:e.pageResult,columns:e.filterColumns,rowstatus:e.tableRowClassName,rowA:e.rowA,rowB:e.rowB,rowC:e.rowC,text:e.text},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete,"handle-lock":e.handleLock}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"修改",width:"50%",visible:e.dialogVisible,"custom-class":"deviceDialog",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"100px","label-position":"right",size:e.size}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataFormRules,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备名称",prop:"name"}},[a("el-input",{attrs:{id:"equipmentName"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备编号",prop:"code"}},[a("el-input",{attrs:{id:"equipmentCode"},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"设备类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.machineType,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备型号",prop:"category"}},[a("el-input",{attrs:{id:"equipmentCategory"},model:{value:e.dataForm.category,callback:function(t){e.$set(e.dataForm,"category",t)},expression:"dataForm.category"}})],1),e._v(" "),a("el-form-item",{staticClass:"inputLengthB",attrs:{label:"所属车间",prop:"department"}},[a("el-select",{attrs:{placeholder:"请选择车间"},model:{value:e.dataForm.department,callback:function(t){e.$set(e.dataForm,"department",t)},expression:"dataForm.department"}},e._l(e.department,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"sub-title"},[e._v("关联工序\n        "),a("transition",{attrs:{name:"slide-fade"}},[e.show?a("span",{staticClass:"tips_procedure"},[e._v("请选择该设备生产相关的工序")]):e._e()])],1),e._v(" "),a("el-form-item",{staticClass:"procedure-form-inline",attrs:{"label-width":"0"}},[a("el-checkbox-group",{on:{change:e.handleWelfareTreatmentChange},model:{value:e.equipment.procedure,callback:function(t){e.$set(e.equipment,"procedure",t)},expression:"equipment.procedure"}},e._l(e.procedures,function(e,t){return a("el-checkbox",{key:t,attrs:{name:"fulicheckbox",label:e.label,value:e.value,"data-value":e.value}})}),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{size:"medium"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"define-button",attrs:{size:"medium",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(e){a("srjs")},null,null);t.default=g.exports}});
//# sourceMappingURL=0.92b5c70549c389eb27c3.js.map